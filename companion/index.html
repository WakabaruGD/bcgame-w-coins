<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Решечный Гамбит - Компаньон</title>
    <style>
        /* Общие стили */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        :root {
            --primary: #2c3e50;
            --secondary: #e74c3c;
            --accent: #f39c12;
            --light: #ecf0f1;
            --dark: #1a252f;
            --coin-gold: #ffd700;
            --coin-silver: #c0c0c0;
            --active-bg: rgba(44, 62, 80, 0.8);
            --hand-bg: rgba(26, 37, 47, 0.9);
            --chest-bg: rgba(155, 89, 182, 0.15);
            --neutral: #3498db;
            --blood-red: #d12424;
        }
        
        body {
            background: linear-gradient(135deg, #1a2a3a, #2c3e50);
            color: var(--light);
            line-height: 1.6;
            padding: 15px;
            min-height: 100vh;
            background-attachment: fixed;
            max-width: 100%;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding-bottom: 70px;
        }
        
        /* Шапка */
        header {
            text-align: center;
            padding: 20px 0;
            margin-bottom: 20px;
            position: relative;
        }
        
        h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
            color: var(--accent);
            text-shadow: 0 0 10px rgba(243, 156, 18, 0.7);
        }
        
        .subtitle {
            font-size: 1.1rem;
            color: var(--light);
            margin-bottom: 20px;
            font-weight: 300;
        }
        
        /* Статус игры */
        .game-status {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            gap: 10px;
        }
        
        .status-card {
            background: rgba(26, 37, 47, 0.8);
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            flex: 1;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .status-card h2 {
            font-size: 1.1rem;
            margin-bottom: 10px;
            color: var(--accent);
        }
        
        .coin-counter {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #7f8c8d;
            display: inline-block;
            margin: 0 2px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        .chest-counter {
            display: flex;
            gap: 10px;
            justify-content: center;
        }
        
        .coin-counter-icon {
            display: inline-flex;
            align-items: center;
            margin: 0 5px;
        }
        
        .coin-counter-icon .icon {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin-right: 3px;
            font-weight: bold;
            font-size: 12px;
        }
        
        .heads-icon {
            background: var(--coin-gold);
        }
        
        .tails-icon {
            background: var(--coin-silver);
        }
        
        /* Монеты */
        .coins-container {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            min-height: 80px;
            margin-top: 10px;
			padding: 10px 15px; /* Добавляем отступы */
        }
        
        .coin {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.8rem;
            box-shadow: 0 3px 8px rgba(0,0,0,0.3);
            cursor: pointer;
            user-select: none;
            transition: transform 0.3s, box-shadow 0.3s;
			flex-shrink: 0;
			margin: 0 2px; /* Дополнительные отступы между монетками */
			position: relative; /* Для z-index */
			z-index: 1; /* Поднимаем над фоном */
        }
        
        .coin.heads {
            background: rgba(0, 0, 0, 0.1);
            color: rgba(0, 0, 0, 0.1);
        }
        
        .coin.tails {
            background: rgba(0, 0, 0, 0.1);
            color: rgba(0, 0, 0, 0.1);
        }
        
        .coin.unknown {
            background: #555;
            color: var(--light);
        }
        
        .coin.selected {
            box-shadow: 0 0 0 3px #3498db, 0 0 15px rgba(52, 152, 219, 0.7);
            transform: scale(1.05);
			z-index: 10; /* Выделенная монетка поверх остальных */
        }
        
        /* Стили для SVG внутри монет */
        .coin svg {
            width: 100%;
            height: 100%;
        }
        
        /* Зоны */
        .zone {
            background: rgba(44, 62, 80, 0.8);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
        }
        
        .zone-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .zone-header h2 {
            color: var(--accent);
            font-size: 1.4rem;
        }
        
        /* Кнопки */
        .btn {
            background: var(--accent);
            color: var(--dark);
            border: none;
            border-radius: 8px;
            padding: 12px 15px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 3px 6px rgba(0,0,0,0.2);
            flex: 1;
            text-align: center;
        }
        
        .btn:hover {
            background: #e67e22;
            transform: translateY(-2px);
        }
        
        .btn:active {
            transform: translateY(1px);
        }
        
        .btn.disabled {
            background: #7f8c8d;
            cursor: not-allowed;
            opacity: 0.6;
        }
        
        .btn.secondary {
            background: #3498db;
        }
        
        .btn.danger {
            background: #e74c3c;
        }
        
        .btn.success {
            background: #2ecc71;
        }
        
        .action-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 20px;
        }
        
        .action-buttons .btn {
            padding: 15px;
        }
        
        .hand-controls {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        
        .undo-redo {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        
        .resolution-buttons {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 15px;
        }
        
        .outcome-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        /* Индикаторы */
        .phase-indicator {
            text-align: center;
            padding: 10px;
            margin: 15px 0;
            background: rgba(243, 156, 18, 0.2);
            border-radius: 8px;
            font-weight: bold;
        }
        
        /* Уведомления */
        .notification {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--accent);
            color: var(--dark);
            padding: 15px 25px;
            border-radius: 8px;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            z-index: 1000;
            display: none;
        }
        
        .processing-notification {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.85);
            color: white;
            padding: 30px 40px;
            border-radius: 15px;
            z-index: 2000;
            text-align: center;
            min-width: 300px;
            display: none;
            box-shadow: 0 10px 25px rgba(0,0,0,0.5);
        }
        
        .progress-bar {
            height: 10px;
            background: #333;
            border-radius: 5px;
            margin-top: 20px;
            overflow: hidden;
            position: relative;
        }
        
        .progress {
            height: 100%;
            background: var(--accent);
            width: 100%;
            position: absolute;
            top: 0;
            left: 0;
            transform-origin: left;
            animation: progressBar linear forwards;
        }
        
        /* Модальные окна */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.95);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background: var(--primary);
            border-radius: 15px;
            padding: 25px;
            width: 90%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 15px 35px rgba(0,0,0,0.5);
            position: relative;
        }
        
        /* Анимации */
        @keyframes floatUp {
            0% {
                opacity: 1;
                transform: translateY(0);
            }
            70% {
                opacity: 1;
                transform: translateY(-50px);
            }
            100% {
                opacity: 0;
                transform: translateY(-100px);
            }
        }
        
        @keyframes coinMove {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.2); opacity: 0.7; }
            100% { transform: scale(0.5); opacity: 0; }
        }
        
        @keyframes progressBar {
            0% { transform: scaleX(1); }
            100% { transform: scaleX(0); }
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        /* Анимации конфетти */
        @keyframes confettiFall {
            0% { transform: translateY(100vh) rotate(0deg); }
            100% { transform: translateY(100vh) rotate(720deg); }
        }
        
		@keyframes confettiRise {
			0% {
				transform: translateY(10vh) rotate(0deg);
			}
			100% {
				transform: translateY(-150vh) rotate(560deg); /* Небольшое движение вверх за край */
			}
		}
		
		@keyframes randomSpin {
			to {
				transform: rotate(360deg);
			}
		}
        
        @keyframes bloodDrop {
			0% { transform: translateY(-100vh) scale(0.7); }
			100% { transform: translateY(100vh) scale(1.15); }
		}
        
        /* Стили конфетти */
        .confetti {
            position: fixed;
            z-index: 2000;
            opacity: 1 !important;
            user-select: none;
            pointer-events: none;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }
        
        .wave-confetti {
            font-size: 2.5rem;
            font-weight: bold;
			animation: 
				confettiRise 2s ease-in-out forwards,
				randomSpin linear infinite;
        }
        
        /* Стиль для капель крови (символы) */
        .blood-symbol {
            font-size: 1.8rem;
            animation: bloodDrop 1.35s linear forwards;
			opacity: 1 !important;
        }
		
        .blood-drop {
            width: 15px;
            height: 20px;
            background: var(--blood-red);
            border-radius: 50% 50% 0 50%;
            animation: bloodDrop 1.35s linear forwards;
        }
        
        /* Сообщения */
        .victory-message {
            text-align: center;
            font-size: 1.8rem;
            color: var(--accent);
            margin: 20px 0;
            text-shadow: 0 0 10px rgba(243, 156, 18, 0.7);
            animation: pulse 1.5s infinite;
        }
        
        .neutral-message {
            text-align: center;
            font-size: 1.5rem;
            color: var(--neutral);
            margin: 20px 0;
        }
        
        .blood-message {
            text-align: center;
            font-size: 1.5rem;
            color: var(--blood-red);
            margin: 20px 0;
            text-shadow: 0 0 8px rgba(138, 3, 3, 0.5);
        }
        
		/* Обновленные медиа-запросы */
		@media (max-width: 480px) {
			body {
				padding: 10px;
			}
			
			.container {
				padding-bottom: 60px;
				max-width: 100%;
			}
			
			h1 {
				font-size: 1.6rem;
				margin-bottom: 5px;
			}
			
			.subtitle {
				font-size: 0.9rem;
				margin-bottom: 10px;
			}
			
			.game-status {
				flex-wrap: wrap;
				gap: 5px;
				margin-bottom: 15px;
			}
			
			.status-card {
				flex: 0 0 48%;
				padding: 8px;
				min-height: 70px;
			}
			
			.status-card h2 {
				font-size: 0.9rem;
				margin-bottom: 5px;
			}
			
			.zone-header h2 {
				font-size: 1.1rem;
			}
			
			.zone {
				padding: 15px;
				margin-bottom: 15px;
			}
			
			.coins-container {
				min-height: 60px;
				overflow-x: auto;
				flex-wrap: nowrap;
				padding-bottom: 5px;
				justify-content: center; /* Центрируем всегда */
				padding: 12px 20px; /* Увеличиваем боковые отступы */
				gap: 12px; /* Оптимальное расстояние */
			}
			
			.coin {
				flex: 0 0 46px; /* Чуть уменьшаем размер */
				height: 46px;
				margin: 0 3px; /* Больше пространства между */
			}
			
			.hand-controls {
				flex-wrap: wrap;
			}
			
			.hand-controls .btn {
				flex: 0 0 100%;
				margin-bottom: 5px;
			}
			
			.control-grid {
				grid-template-columns: 1fr;
				gap: 8px;
			}
			
			.control-grid .btn {
				font-size: 0.9rem;
				padding: 10px;
			}
			
			.action-buttons {
				grid-template-columns: 1fr;
			}
			
			.resolution-buttons .btn {
				font-size: 0.9rem;
				padding: 12px;
			}
		}
        
        /* Новые стили для сетки управления */
        .control-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 15px;
        }
		/* Дополнительные оптимизации */
		.coins-container::-webkit-scrollbar {
			height: 5px;
		}

		.coins-container::-webkit-scrollbar-track {
			background: rgba(0,0,0,0.1);
		}

		.coins-container::-webkit-scrollbar-thumb {
			background: var(--accent);
			border-radius: 3px;
		}

		/* Убираем лишние отступы */
		.zone-content {
			min-height: auto;
		}
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Решечный Гамбит</h1>
            <p class="subtitle">Цифровой компаньон для вашей игры</p>
        </header>
        
        <div class="game-status">
            <div class="status-card">
                <h2>Актив</h2>
                <div class="status-value" id="active-count"></div>
            </div>
            <div class="status-card">
                <h2>Рука</h2>
                <div class="status-value" id="hand-count"></div>
            </div>
            <div class="status-card">
                <h2>Сундук</h2>
                <div class="chest-counter">
                    <div class="coin-counter-icon">
                        <span class="icon heads-icon">О</span>
                        <span id="chest-heads-count">0</span>
                    </div>
                    <div class="coin-counter-icon">
                        <span class="icon tails-icon">Р</span>
                        <span id="chest-tails-count">0</span>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="phase-indicator" id="phase-indicator">
            Подготовка к игре
        </div>
        
        <div class="zone">
            <div class="zone-header">
                <h2>Ваша рука</h2>
            </div>
            <div class="zone-content">
                <div class="coins-container" id="hand-coins">
                    <!-- Монеты в руке будут здесь -->
                </div>
                <div class="hand-controls" id="hand-controls">
                    <button class="btn" id="heads-btn">Орел</button>
                    <button class="btn" id="tails-btn">Решка</button>
                </div>
            </div>
        </div>
        
        <div class="zone">
            <div class="zone-header">
                <h2>События</h2>
            </div>
            <div class="action-buttons" id="phase-buttons">
                <button class="btn" id="start-round-btn">Начать раунд</button>
                <div class="resolution-buttons" id="resolution-buttons" style="display: none;">
                    <button class="btn" id="majority-heads-btn">Орлы большинство</button>
                    <button class="btn" id="majority-tails-btn">Решки большинство</button>
                    <button class="btn secondary" id="inflation-resolve-btn">Инфляция</button>
                </div>
            </div>
        </div>
        
        <!-- Измененная зона управления -->
        <div class="zone">
            <div class="zone-header">
                <h2>Управление игрой</h2>
            </div>
            <div class="control-grid">
                <button class="btn secondary" id="show-chest-btn">Показать сундук</button>
                <button class="btn danger" id="end-game-btn">Игра окончена</button>
                <button class="btn" id="undo-btn">Отменить</button>
                <button class="btn" id="redo-btn">Повторить</button>
            </div>
        </div>
        
        <div class="notification" id="notification">
            Сообщение
        </div>
        
        <!-- Центральное уведомление с таймером -->
        <div class="processing-notification" id="processing-notification">
            <div class="message" id="processing-message">Выполнение действия...</div>
            <div class="progress-bar">
                <div class="progress" id="processing-progress"></div>
            </div>
        </div>
        
        <!-- Модальное окно для сундука -->
        <div class="modal" id="chest-modal">
            <div class="modal-content">
                <h2>Ваш сундук</h2>
                <div style="text-align: center; margin: 15px 0; font-size: 1.2rem;">
                    Орлы: <strong id="modal-heads-count">0</strong> | 
                    Решки: <strong id="modal-tails-count">0</strong>
                </div>
                <div class="coins-container" id="chest-coins">
                    <!-- Монеты в сундуке будут здесь -->
                </div>
                <!-- Центрированная кнопка закрытия -->
                <div style="text-align: center; margin-top: 20px;">
                    <button class="btn" id="close-chest-btn">Закрыть</button>
                </div>
            </div>
        </div>
        
        <!-- Модальное окно конца игры -->
        <div class="modal" id="endgame-modal">
            <div class="modal-content">
                <h2>Игра окончена!</h2>
                <div id="endgame-message">
                    <p>В вашем сундуке 7 монет! Победителем становится игрок с наибольшим количеством решек. При равенстве решек побеждает игрок с меньшим количеством орлов.</p>
                </div>
                <div class="coins-container" id="final-chest">
                    <!-- Монеты в сундуке на конец игры -->
                </div>
                <div class="outcome-buttons">
                    <button class="btn success" id="victory-btn">Я победил!</button>
                    <button class="btn secondary" id="defeat-btn">Победил другой</button>
                    <button class="btn danger" id="draw-btn">Ничья 😱</button>
                </div>
                <div id="outcome-message" style="text-align: center; margin-top: 20px;"></div>
                <!-- Центрированная кнопка новой игры -->
                <div class="action-buttons" style="display: flex; justify-content: center; margin-top: 20px;">
                    <button class="btn" id="new-game-btn">Новая игра</button>
                </div>
            </div>
        </div>
    </div>
    
    <script>
		// SVG изображения
		const headsSVG = `<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 195.2 203.6"><defs><linearGradient id="a"><stop offset="0" stop-color="#fed837"/><stop offset="1" stop-color="#d99703"/></linearGradient><linearGradient xlink:href="#a" id="b" x1="22.5" x2="22.8" y1="38.6" y2="174.4" gradientTransform="translate(79.7 -34)" gradientUnits="userSpaceOnUse"/></defs><ellipse cx="97" cy="98.3" fill="url(#b)" paint-order="stroke markers fill" rx="96" ry="97.9"/><path fill="#eaa60c" d="M97.5 10a82.5 77.4 0 0 0-33.8 6.5 96 90 0 0 0-50.4 58.8c-2 6.1-3.6 12.4-4.3 18.9-.6 5 .1 15.1.1 15.2h.5s0-8.4.6-12.7c1.4-9.3 3.2-18.6 6.7-27.4a94.6 88.8 0 0 1 37.9-46A71.7 67.3 0 0 1 96.4 12a85 79.7 0 0 1 30.8 6.2 89.2 83.7 0 0 1 44.7 40.7 96 96 0 0 1 9 23.9c2 7.2 3.4 22.1 3.4 22.1h.5s-.1-5.4-.7-12.2a111 111 0 0 0-3-20A97.7 91.7 0 0 0 140.7 22a82.3 77.2 0 0 0-43.2-12zm3 8.5h-2.3c-3.6 0-7.3.5-10.7 1.5-3 1-5.8 2.4-8.3 4.1-2 1.3-3.7 3.3-5.7 4.7a67 67 0 0 1-4.6 2.4l-6-2.3.4 4.1.9.8s-3.2 1.7-4.6 2.7c-1.6 1.1-3 2.5-4.1 4-1.5 2.1-2 4.7-3.3 6.9-.9 1.5-2 2.9-3 4.4l-3 5.2 4.1 15.5 7.5 2.2 6.6 10.7 3.1.6V64.6l3.7-4.2s.9-5.8.8-8.7A46 46 0 0 0 69.5 39s3.7 5.7 6.4 7.7c1.8 1.3 3.9 2.2 6 2.6 1.4.2 2.8.2 4.2 0 1.7-.4 3-2.3 4.7-2.1 2.4.2 3.6 3 5.8 4a22 22 0 0 0 14.2 1c1.4-.4 2.3-2 3.8-2 1.6 0 2.7 1.8 4.3 2.2 3.2.9 6.6.9 10 .5 2.3-.2 4.5-1.2 6.7-1.9l4-1.4 3.3 5.7 1.4 13.4 5.8-10.3-.8-10.4 4.7-.4s-2.5-4.8-4.3-6.9a44 44 0 0 0-8.7-7.1l-10.5-5.5s3.6 0 5-.9c1-.7 1.8-3.3 1.8-3.3s-6.2 1.2-9.3 1c-3.6-.3-7-1.6-10.6-2.6-3.4-1-6.7-2.6-10.3-3.3a44 44 0 0 0-6.7-.5z"/><path fill="#c37f02" d="M72.2 73.4c-1.3 0-2.7.4-3.7 1.1-.8.6-1.7 2-1 2.8 1.4 1.5 4.6-2.5 6.1-1.2 1.6 1.3-.6 3.8-.6 5.8 0 2.7 0 5.6 1 8.2.6 2.1 1.6 4.4 3.3 5.8 3.3 2.6 7.8 3.2 12 3.6 2 0 4 0 6-.5 1.9-.4 3.8-.8 5.5-1.8 1.5-.8 2.7-2 3.5-3.4 2.1-3.7.8-8.7 2.6-12.6.4-.8 1-1.5 1.6-2.1a7 7 0 0 1 3.4-1.2c1 0 2 .3 3 1 .7.4 1.3.9 1.8 1.5.6.8.2 2.6 1.2 2.5 2-.1 2.2-4 1-5.6-1.5-2-5.2-1.8-7.7-1.3a7.3 7.3 0 0 0-4.7 2.6c-2 2.7-.7 6.5-1.6 9.6-.7 2.2-1 5.2-3 6.6-3.8 2.6-9.3 2.1-14 1.6-3.7-.4-8-1-10.5-3.6-2.7-3-2-7.7-2.5-11.6-.3-2.4 1.5-5.6-.4-7.2-.6-.4-1.5-.6-2.3-.6zm52.6 20.2-.8.3c-.9.7 0 2.4.7 3.2 1 1 2.7 1.1 4.1 1.3 2.5.5 5.1.2 7.6 0 1.5 0 1.4 0 2.8-.4.8-.3 1.8-.8 2-1.5.2-.6 0-1.3-.5-1.6-3.6-2-6.5 2-10.6 1.5-1.8-.2-3.7-2.9-5.3-2.8zm-.6 6.4-3.2 2.2c-1 .6-2.3 1-3.5 1.2-1.7.4-3.6.3-5.4.4l-3.7.2s.2 1.6.8 2.2c1 1 2.4 1.5 3.8 1.8 1.3.4 2.8.6 4.3.4.4 0 .9-.3 1.3-.5l2.2-1.1-1.9-.5 5.2-3.6.1-2.7zm-59.4 4.6v.1s.2 5.8 1.2 8.5a30 30 0 0 0 6 8.8c.8.7.8 1.2 1.6 1.8l-1.5 2.2s5.8 7 8.6 9.2a48.5 45.5 0 0 0 22.8 10.1 24 24 0 0 0 10.3-1.5c2.2-1 5.4-4.4 5.4-4.4l-8.4 14.7-8 12.3 7.5.6 11.6-.2-.8-2.8s1.8-1.9 2.4-3c.5-1.2 1-3.8 1-3.8l5.8 5.1s1-3.3.8-5c-.5-3-3.2-5.4-4.3-8.3-.5-1.4-1.2-3-1.1-4.5 0-2.4 1.9-6.9 1.9-6.9v-4.2l-9.4 3.8-14 .3-16-5.6 2.4.1s-5.6-3.7-8.3-5.8c-3.7-2.8-6.7-5-9-8.5-1.7-2.4-2.7-5.3-4.8-7.5-1.5-1.5-1.7-5-3.7-5.6zm5.1 17.7-9.7 14.4s-12.4 5.4-18.1 9C38 148 30.5 154 30.5 154l15.7 16.6s.8-2.5 1.6-3.5c1.6-2 3.7-3.8 6-5 3.2-1.8 7.1-1.8 10.4-3.4 1.6-.7 4.5-2.8 4.5-2.8l6.4 7.5 5.4 2 7.8-.6-.8-4s3.7.5 5.4 1a18 16.9 0 0 1 6.2 3.3c1.4 1.3 3 5 3 5l-.3-9.8-26.7-23.8-5.2-14.2zm61.2 17.4 1.1 15.8 3.7 1.2 4.2 5.4 10.5.3.8 4.6 12.5-11.8-4-4.4-6-.6-22.8-10.5z"/><path fill="#f1cb12" d="M120.5 36.3c-.3 0-1 0-1 .5s.8.9 1.4 1.3c1.3.6 2.9.8 4.4 1 2.3.6 4.7 1 7.1.9a15 15 0 0 0 3.3-.7H132a42 42 0 0 1-9.9-2.3c-.5-.1-1-.7-1.6-.7zM53.8 73.5s-4.3 0-5.8 1.2c-2 1.6-2.7 4.4-3.1 7-1 6.8 1.6 13.6 6.9 18.4a37 37 0 0 0 9.4 4.2l2.9-3.5H61c-1.6-.1-3.3-.1-4.8-.8-2-1-3.7-2.4-5-4a15.7 15.7 0 0 1-3.2-5.7c-.6-1.8-.3-4-.2-5.8 0-2-.4-4.3.8-6 1-1.2 2.4-2 4-2.1 1.4-.2 3 .3 4.3 1a26 26 0 0 1 5.1 7.3s0-5-1.4-7c-1.5-2-6.8-4.2-6.8-4.2zm61.2 8.4s0 2.9.2 4.2c.2 2.8 1.5 3.9 3.2 6.7 1.4 1.5 2.6 2.7 3.3 4.5.4.9 2 3.4 2 3.4h.8s-.6-3.4-1-4.7c-.5-1.8-2.3-3-3.2-4.6-1.4-2.6-3.2-8.2-3.2-8.2zm25.9 14.6-2.9 1.9s.3 4.4 0 6.9a45.9 45.9 0 0 1-8.9 20.3c-2.1 2.8-7.2 8-7.2 8s6-3.6 8.3-6a40.3 40.3 0 0 0 10.7-31.1z"/><path fill="#fef26b" d="M192.1 98.2s-1.3-15-3.2-22.2a100.1 94 0 0 0-28-47.9 97 91 0 0 0-28.8-17.8 98.5 92.4 0 0 0-33.2-6.8 83.7 78.5 0 0 0-45.5 10.7 100.7 94.5 0 0 0-24.1 18.2A109 102.3 0 0 0 3.4 86.8c-.7 4.2-1 12.7-1 12.7s-.5-10.2.2-15.2c1-6.4 3-12.7 5.2-18.8A98.8 92.7 0 0 1 63.6 7.8a93 87.3 0 0 1 82.8 7A102.4 96 0 0 1 173 37.3c7 8.5 12.5 18.3 15.7 28.7a175 164.2 0 0 1 3.3 32.1z"/><path fill="#7e4800" d="M100.1 0c-5.8 0-11.7 0-17.5 1.1a90.7 90.7 0 0 0-47.7 22c-3.8 3.3-7.4 6.7-10.8 10.4A105.6 105.6 0 0 0 4.7 68.2C2.1 76.2.5 84.6.1 93c-.6 12.8 1.5 25.9 4.2 37.3a102.3 102.3 0 0 0 25.4 44.3 95.8 95.8 0 0 0 46.7 26.7 92 92 0 0 0 40.8.2 99.4 99.4 0 0 0 75.6-83l1.3-8c.4-1.1.4-2.3.5-3.4 1.2-11 .4-22.1-2.4-32.9a97.4 97.4 0 0 0-18.3-38.4A98.6 98.6 0 0 0 100.1 0Zm-3.8 1.9A95.8 95.8 0 0 1 178 46.8a93.1 93.1 0 0 1 14 48.8 97.3 97.3 0 0 1-51.5 87.5A87.2 87.2 0 0 1 98 193.8c-4 0-8 0-12.1-.5-9.9-1.3-19.4-4-28.4-8a78.6 78.6 0 0 1-17.7-11 149 149 0 0 1-13-12 106.6 106.6 0 0 1-20.9-39.6 102.6 102.6 0 0 1-1.5-44l1-4C7 68 9.2 61.8 12 55.7l1.9-3.7c7.5-14.6 19-27 33.3-36.2a89 89 0 0 1 49.1-14Zm-1.6 5.7a85.7 85.7 0 0 0-43.8 13 89.5 89.5 0 0 0-29.4 29.8 92.5 92.5 0 0 0-12.3 59.8 96.6 96.6 0 0 0 15.9 39.6c.6.9 1 2 1.7 2.7 1.8 1.7 3.2 3.9 5 5.8a80 80 0 0 0 14 12.7c.4-.5 1.3-1 1-1.8-2-2-4.7-3.4-6.4-5.7-.2-.9-.3-1.8-.6-2.6 0-.5-.4-.8-.2-1.2-.2-1 8.5-1.9 9.5-1.9.7.6.6 1.6.9 2.4.2.8.3 1.7 1 2.3.4.4.5-1 .4-1.2l-1-3.8 10.5-1.1c.5.3 1 0 1.4 0 .6 0 1.2-.6 1.8-.7l-2-.5c-1.6-3.2-1.9-7.1-3.2-10.3-.2-.6 1-1 1.7-1.2 3.2-.1 2.9 5.7 6.6 12 .6.3.8 1 1.3 1.5 2.3 3.2 4.8 6.3 7.7 9.1.7.8 1.9 1.6 3 1.2 1-.5 2.5-3 2.6-3.8 1.3-3 3.5-5.5 6.3-7.3 1.1-1 2.5-1.6 4-1.8l1 1.9 3 5c.3.3.8 1.7.8.6.1-1 0-1.8-.6-2.6-1-1.2-1.7-2.6-2.4-4-.1-.3-.4-.7-.4-1 .6 0 .9.5 1.3.7 2.2 2 4 4.4 5.8 6.7.4.7.9 1.4 1 2.2-1.9.7-6.6.4-8.8.5-.6.2-1.6.4-.5.7.9.4 1.8.1 2.8.2 2 0 4.1 0 6.1-.3.5-.3.2.7.3 1 0 1.5-.2 3 .5 4.5.7.7 2.2-.2 2-1.2 0-1.3-.5-2.8.1-4 2-.7 3.7-.4 5.3-.5l.7 1.3c.2-.3.2-1.4.7-1.2h2l8.4-.6c.2.3.7 1.5.8.6 0-.7.7-.6 1.3-.5 2.2 0 4.6 0 6.8-.3.9-.4 1-1.3 1.5-2 .8-1.6 1.2-3.3 1.3-5 0-2 .3-3.4.6-6.6 1.3 0 2.6-.2 3.8.2.3.6.2 1.4.4 2 .7 3 1.3 6.2 1.7 9.3.3.4.7 1.5.8.5.4-1 0-1.9 0-2.7-.4-3.1-1.2-6.1-1.7-9.2 3.6 0 6.8-.3 9.6 0 .4 2.7 1.3 6 2.1 11.1-.8.2-1.7 0-2.6 0h-5c-.6.2-1.5.4-.4.7.8.5 1.7.3 2.6.4h5.5c0 .6.2 1 .7 1.4.3.3.5-.8.5-1 0-.4 1 0 1.2-.1l1.7.1-2.5 2.3c-.2 0-.6-.7-1-.2-.6.3.2 1-.5 1.4-.6.5-1.6 1-1.7 1.8.1.7.4 1.2.7 1.9 3-1.9 5-3.8 7.5-6.1 3.2-3.2 6.3-6.5 9-10 12-14.6 19-32.2 20.3-50.6 1.4-19.5-3.5-39-14.1-55.9a74 74 0 0 0-12-14.2 91 91 0 0 0-38-22.7 93.8 93.8 0 0 0-27.4-3.6Zm.6 2.8c11.9 0 23.9 1.9 34.9 6.4l7 3c-1.4.8-3 1.3-4.7 1.2-4.4-.2-8.5-1.9-12.5-3.2a56.3 56.3 0 0 0-19.4-4 55 55 0 0 0-17 2.9c-4.3 1.7-8.3 4-11.8 7A14 14 0 0 0 68 28c-1.1-1-2.5-2.5-4.4-2.3-1.6.3-2.2 2-2 3.4l.3 2.8c-.6.5-1.5.4-2.1.7-2.6.9-5 2.5-6.5 4.5-3.4 4-5.9 8.7-7.3 13.7-1.6 5.6-1 11.5.7 17 .5 1.8 1.2 3.7 2 5.6a13 13 0 0 0-4.2 6c-1.6 5-1.2 10.5 1 15.3 1.6 3.4 4.4 6.3 7.5 8.4 1.9 1.3 4.2 2.1 6.5 2.3.9 0 2-.4 2.7.3.4 1.7.7 3.4 1.4 5 1.2 3.1 2.7 6.2 4.8 8.8-2.4 2-4.4 4.3-5.7 7a27 27 0 0 0-2.2 4.6c-1 1.2-2.6 1.7-3.9 2.4-6.7 3.4-13.8 6.3-20.3 10.1a98.3 98.3 0 0 0-8.1 6A91.3 91.3 0 0 1 11 98.3l.3-7.3a86.9 86.9 0 0 1 59.1-76.6c8-2.7 16.4-4 24.9-4zm3.8 5.7a60 60 0 0 1 16.7 3.4 56 56 0 0 0 19.3 4l1.3.1a9.2 9.2 0 0 1-4 3.7l-1.5.8a32 32 0 0 1 14.3 6.5 30 30 0 0 1 7 9.2c.4 1 .8 2.1 1 3.2-.2.4-.7 0-1 0-2-.4-3.9-1-5.7-1.7-.7-.3-1 .6-.7 1.1 1.3 2 2 4.2 2.3 6.5.2 2 .2 4.1-.2 6.1-.3 2.5-1.3 4.9-2.8 7-.5 0-.2-.7-.3-1-.2-3.5.1-7.1-.8-10.6-.7-2.6-1.4-5.2-2.8-7.6a8 8 0 0 0 3.3-4c.3-.5-1 0-1.3 0-6 1-12.2 1-18.2-.5l-4.8-1.6c-.5 0-1.8-.4-.9.3.8 1 2 1.3 3 1.9a30 30 0 0 0 10.2 2.5l3.4.5c-2.7 1-5.7 1.3-8.7 1.3a35 35 0 0 1-10.6-1.2 74 74 0 0 1-11.6-4l-5.5-3c-.5 0-1.6-.6-1 .1.7 1.2 1.8 1.9 2.8 2.7 2.8 2.3 6.2 4 9.8 5.1-.2.4-.8.3-1.2.4-2.6.2-5.2-.3-7.8-.8a45 45 0 0 1-13-4.7 55 55 0 0 0-8.7-4.6c.4 1.3 1.7 2.2 2.7 3.1l4.3 4.2c-.5.3-1.2 0-1.8 0-2.8 0-5.6-.6-7.9-1.8-2.4-1.2-4.4-2.8-6.8-3.9-.4-.1-1.3 0-1.2.4.7 1.9 2 3.4 2.4 5.3.8 2.8.7 5.7.5 8.6a40.3 40.3 0 0 1-6 12.9c-1 3.6 1.3 6.7-1.5 8-1.2.3-.7.4-2 .7-1.4.4-2.7.4-3.1-.2a9.3 9.3 0 0 0-6.5-2.8c-.8 0-1.7 0-2-.9-.9-1.8-1.4-3.9-2-6-1.4-5-1.4-10.2.1-15.2 1.4-3.7 3-7.5 5.4-10.8a14 14 0 0 1 9.6-5.1c-.4-1.7-1.4-3.5-.7-5 .4-.7 1.3-.2 1.6.2 1.2 1.3 2 2.8 2.9 4.2.4-1.8 1.3-3.5 2.5-4.9 3.1-3.7 7.2-6.6 11.8-8.4A48 48 0 0 1 99.1 16zm40 5c5.6 3.1 11 6.9 15.6 11.2A84.3 84.3 0 0 1 173.1 55a92.4 92.4 0 0 1 10.2 52 89 89 0 0 1-18.3 44.8c-.3.7-.8-.3-1.2-.5a37.5 37.5 0 0 0-5.4-4c-6-3.7-12.5-6.7-19-9.3l-8-2.8c-.9-.4-1.1-1.4-1.6-2.2-.2-.7-.6-1.6.2-2.1 1-1 1.4-2 2.2-2.8 4-5.3 7-11.3 8.7-17.6.9-3.4 1.1-7 1-10.6 0-1.4.1-2.9.4-4.4 1.6-.4 2.5-1.4 3.5-2.5 1.8-1.7 3-4 3.4-6.3.6-3 .8-6 1-9 0-.9.2-1.8.9-2.5.6-.6.9-1.5.7-2.3 0-1.2 0-2.8-1.2-3.5l-3.2-1c.5-1.6 1.6-3.1 2.2-4.6 1.8-4.1 2.2-8.7 1-13-.1-.3-.4-.9 0-1 1.4.3 3 1 4.4.4 1.3-.7 1.3-2.2 1.1-3.4a18 18 0 0 0-3.5-7.7c-4-5-9-9-14.7-11.9-.5-.4.2-1 .3-1.3.8-1.5.8-3.2.9-4.8zM74.8 44l2.3 1.3a21 21 0 0 0 7.4 2.2c2 0 4-.2 5.9-1 .4-.2 0-.9.5-.8a37 37 0 0 0 15.7 4.7c2.2 0 4.6 0 6.7-1.1.6-.3 1.3-1 2-.5 5.3 1.6 10.8 2 16.3 1.2a22 22 0 0 0 6.6-1.9c.4-.2.8 0 .8.4 1.4 3.6 2.5 7.2 2.4 11 .1 2.5.2 5-.2 7.4 0 .7-.5.8-1 .7-5 0-9.8-.1-14.5.4-2 .4-4 .7-5.5 1.7-1.5 1.4-1.8 3.5-2.5 5.3-.4.2-1-.3-1.4-.3a7 7 0 0 0-5.1-.6c-1 .2-1.8.8-2.7 1-.4-.6-.4-1.4-.7-2.2-.4-1.5-1-3.3-2.7-3.8-2.7-.7-5.6-1-8.4-1.5a70.7 70.7 0 0 0-21.8 2c-1 .4-2 1-3 1.6a7 7 0 0 1-3.6.7c-.3-.8 0-1.6 0-2.5.3-1.7.7-3.3 2-4.7 2.6-3.5 4.3-7.5 4.8-11.7.1-2.8.2-5.7-.2-8.5 0-.2-.2-.5 0-.5zm17.4 12.3c-4.3.2-8.4 2.2-11 5.4-1 1-1.8 2.2-2.2 3.5.1 1 1.3.8 2 .6 2.5-.5 4.7-1.8 7.3-2.2 2.7-.4 5.4-.6 8.1-.3 1.5.3 3 .9 4.4.4 1-.7.6-2 .5-3a4 4 0 0 0-2.4-2.9 13 13 0 0 0-6.7-1.5zm37.6 0c-2.8 0-5.9 1-7.6 3-1 1.3-1.5 3-.9 4.4.7.9 1.8.1 2.7 0 2.6-.5 5.2-.4 7.8-.4 3 .3 6 1.3 8.6 2.7 0-2.2-.4-4.5-2-6a9.6 9.6 0 0 0-6-3.5c-.9-.2-1.7-.2-2.6-.2zm-26 15.8c1 .4 1.7 1.5 1.6 2.5.3 4.4 0 8.8-.8 13.1-.8 2.5-2.3 4.9-4.8 6-2.7 1.5-6 1.4-9.2 1.6-2 .1-3.9 0-5.6-.5-3-.8-5.8-2.5-6.9-5.3-1.4-3.3-2-7-1.9-10.5 0-1.9 0-3.7.3-5.6.7-1.2 2.3-1.5 3.6-1.9 3.6-.7 7.3-1 11.4-1.1 4-.1 8.3.1 12.4 1.7Zm36.7-.6c1 .8.5 2.2.5 3-.3 6-.3 12 0 18.1 0 .5 0 1.3-.7 1.4-3 1-6.2 1-9.3.8-2.4-.2-5-1-7-2.3a8.6 8.6 0 0 1-3-4.1 23.3 23.3 0 0 1-1-11.2c.2-1.6.4-3.5 2-4.6 2.4-1.6 5.6-1.8 8.4-2 3.4 0 7.3-.4 10.1.9zm4.2.5c1.4.2 2.4 1.4 2.4 2.6.6 3.7.4 7.7-.4 11.4-.4 1.6-.9 3.8-2 5-.3.2-1.1.8-1.2 0-.3-2.4-.2-5.4-.2-7.9.1-3.3.1-6.5.4-9.6.1-.6.3-1.6 1-1.5zm-17.4 2.2a5 5 0 0 0-4 2c-.3.5-.4 1-.4 1.4.5 0 1 0 1.4-.5a8 8 0 0 1 6.6-.5 6 6 0 0 1 3.4 2.5c.3.2 1 1.4 1 .7 0-2-1.4-3.8-3.2-4.6-1.7-.8-3.2-1-4.8-1zm-35.3.2c-1.9-.1-3.8.3-5.5 1.2a7 7 0 0 0-3.8 5c.4.5.8.6 1.1 0a9 9 0 0 1 8.1-4.3c2.2.3 4.6 1 5.9 2.8 0 .4 1.1 0 .8-.5a4.8 4.8 0 0 0-2.6-3 9 9 0 0 0-4-1.2zm-33.6 2.3c1.9 2.1 2.6 5 4 7.4.6 1.4 1.6 3 3.3 3.3 1.2.1 2.3-.8 2.2-2 .4-3 0-6.1.4-9 .3-.6 2-.7 2.6-1l2.6-.5c0 4.2.3 8.4 1 12.4 1 3.5 3 7 6.4 8.7 4 1.7 8.5 1.9 12.8 1.7 2.5 0 5.1-.5 7.3-1.7 2.8-1.4 4.9-3.8 5.7-6.6 1.2-3.2 1-6.6 1.3-9.7a2 2 0 0 1 1.4-1.7c1.5-.7 3-1.3 4.6-1 1.1.4 2.5 1 3 2s.4 2.3.3 3.3c-.3.5-1-.4-1.4 0-.7.2 0 1 .1 1.4 1.4 2.6 1.9 5.6 3.6 8 1.3 1.7 3.6 4 4.2 6.1.7 2.1.2 2.7-.5 3.8a9.7 9.7 0 0 1-5.6 3.5c-.6 0-1 .6-1.2 1 1 .8 3 .3 4.1-.2 2-.7 4.4-2.8 4.9-4.2.5-1.5 1.5-3.1-.3-5.5 2.3.5 4.6 1.1 7 .9 2 0 4.3.2 6.3-.4.3 0 1-.2 1.3 0l-.4 5.8c0 3-.2 6-1.3 8.9-2.5 7-6.6 13.2-12 18.5a23.4 23.4 0 0 1-9 5.5c-2.5.7-5.1.7-7.7.6a54.5 54.5 0 0 1-33.9-13.3c-.6-1-1.7-1.5-2.5-2.3a33 33 0 0 1-7.4-17c-.2-.9.2-1.8-.2-2.5-.7-.8-1.7-.1-2.4.2-.8.6-1.7 1.3-2.8 1.2-2 0-4-.3-5.6-1.3a17 17 0 0 1-7.3-9.2c-.8-2.3-1.2-4.4-1.2-6.7 0-2.5.5-5.3 2-7.5 1.2-1.8 3.3-3.3 5.4-3.1a8 8 0 0 1 4.9 2.2Zm6.4.3c.5.4.3 1.2.4 1.6l.4 6c-.8-.2-1-1-1.4-1.6-.8-1.7-1.3-3.5-1.4-5.3.6-.3 1.3-.7 2-.7zm62 1.7c-1.4 0-2.6 1.3-2.6 2.7-.2 2.1.2 4.4 2 5.7 1 .3 2 .3 2.9 0 1-1.6 1.5-3.6 1.3-5.5-.1-1.7-1.7-3-3.5-2.9zm-35 .1c-1.7 0-3 1.4-3.1 2.8-.3 1.9-.2 4.2 1.4 5.5 1 .7 2.4 1 3.4.2 1.3-1 1.7-2.9 1.6-4.4 0-1.4-.4-3.1-2-3.7a3 3 0 0 0-1.4-.4zm-38.7.4a5 5 0 0 0-4.1 5.1c0 .5.8.7 1 .2.7-1.6 2.6-2.7 4.4-2.1 1.2.4 1.8 1.9 2 3 0 .5-1 .5-1.3 1a7.1 7.1 0 0 0-1.1 6c.4 1.4 1.2 3 2.7 3.7.5.4.7-.5.5-1-.8-1-1.3-2.1-1.2-3.3 0-1-.2-2.4.9-3.1.8-.5 1.4.5 1.8 1l1.8 3a13.7 13.7 0 0 0-6-13.2c-.4-.3-1-.3-1.4-.3zm55.1 22c-.7 1.6-.4 3.2 1.2 4.1.7.2 2 .5 2.6.4a4 4 0 0 0 2-.7c.5-.3 1.1-.9 1-1.2h-1.7c-.7.1-1 .2-1.8.1-2.6-.2-2.6-1.5-2.4-2.3.2-.9.7-1.3.3-1.5-.7 0-.9.6-1.2 1.1zm-11.4 7.4a3 3 0 0 0-2.7 3.6c.2.4.8 0 1 0 .7-.2 1.3-.6 1.8 0 1.5 1.4 3.1 2.4 4.8 2.9 4.6 1.8 9.4 2.6 14.2 2.2 2.8-.2 5.6-.6 8.4-1.6.7-.4 1.6-1 1.6-2s-1-1-1.6-.5a16 16 0 0 1-6.4 2c-2.5.2-5 .3-7.7 0a25 25 0 0 1-9.2-2.5c-1.2-.8-2.5-1.3-3.6-2.5-.3-1.1.2-1.3-.6-1.6zm17 12.9c-1.8 0-3.7 0-5.5-.4-.8 0-1.2 1-.5 1.4 2 1 4.2 1.5 6.3 1.3a7 7 0 0 0 4.2-1.5c.5-.5.4-1.5-.2-1.6-1.3.4-3 .7-4.3.8zm-44.4-.1c.3 1.1.1 2.3.3 3.5 0 1.6.4 3 .8 4.6-1.5 1.6-3.4 3.2-4.7 4.8-.3-.2-.4-.7-.6-1-.1-.6-1.3-.2-1 .3.2.7.6 1.3.6 2-.6.8-1.6 1.6-2.3 2.3-.4-1 .2-2 0-3 0-1.3.1-2.6.9-3.6.2.3.8 0 1 0v.1c.2-.7-.2-1.4 0-2.1.4-1.7 1.7-3 2.5-4.4.7-1.2 1.4-2.5 2.4-3.4 0 0 .1-.2.1 0zm4 3.4c7 5.7 15.2 10.1 24 13.1 4 1 8 1.4 12 1.6l3.2.1c1.1-.6 2.4-.2 3.5-.7l1.5-.3c0 2.4-1.2 4.5-2.3 6.5a109 109 0 0 1-11.2 15.8c-1-1.6-1.8-3.3-3.1-4.6-4.7-5.3-11-9.1-16.5-13.6-2.5-2-4.8-4.3-6.6-6.8-3.2-4.3-6.1-7.8-4.5-11.1zm-2.3 6c.3.5.3 1.2.7 1.7.4 1 1 1.6 1.2 2.4 1.4 2.3 3 4.4 4.8 6.4l7.7 6.7c-2.6 2.1-5.3 5.3-7.3 6.9-1.3-1.4-2.9-3.5-4.1-5-.8-1.5-2.1-2.7-2.8-4.2 1.2-1.4 5-4 4.8-5-1.3-.4-3.7 2.2-5.5 3.8-1.3-2-2.3-4.2-3.4-6.5-.4-1-1.2-2-.5-2.9 1.5-1.3 2.8-3.5 4.4-4.2zm55.2 3.5a16 16 0 0 1 2.7 7.6c0 .4.3.9 0 1.4-2.8-2.6-3.7-4.5-7.6-4.5 0-.8 0-1.7 1-2 1.6-.8.9-1.1 3.7-2.7zm-66.7 1c.8 3.2 1.4 5.4 1.2 6-.8.8-1.4.6-2.5 1-.8-1.1-.4-1.7-1.7-3.5-.5-.6-1-1-.8 0-.1.8.4 1.6.7 2.3l.5 1.5-9.5 4.3c-.8-1.3-2.3-3.4-2.2-4.7 7.4-3.3 9.2-4.4 14.3-6.8zm10.1 10.3c-.8 1.2-1.8 2.3-2.7 3.4-4.8-9.4-5.9-8.8-1.7-12 3.6 6.7 1.7 3.2 4.4 8.7zm62.2-7c1.1.3 2.4.5 3.1 1.5.1 4.2 1.7 6 1.7 7.8l.2 1.3h-3.4c-.3-.3-.6-.7-.3-1 .3-1-.2-1.8-.2-2.7l-1.3-6.6c0-.1 0-.3.2-.3zm4.3 1.6c3.2 1 6.4 2.3 9.4 3.8.8.5 1 1.5 1.7 2 .4.6 0-1 .4-.9 3 1.3 5.7 2.9 8.4 4.4-2.2 0-5-.2-6.3-.3-.6 0-1 0-1.2-.6-.2-.4-1 0-1 .4h-9.5c-.6-3.3-1-3.3-1-5-.3-1.3-.7-2.6-.8-3.8zm-7.5 5.9-.1 2.8c.4-.6.7-1.2 1.2-1.7.5.4.3 1.2.5 1.8.2 2.1.2 4.4.1 6.6 0 .1-.1.7-.3.3 0-.4-.5-.6-.5-1.2l-.1-4c-.3-.5-.5-1.3-.8-.4-.5.8-.2 1.9-.4 2.8-3.4-3.6-6.8-6.6-10.6-5.2 0-.4.5-1 .7-1.5 1.1-2 2-4 2.8-6 3.6-.2 7 2.8 7.5 5.6zm-84.5-3.3c.3 1.3 1.2 2.5 1.6 3.7 0 .3.4.7.3 1-2.8 1.2-6 3.7-8.6 4.7-.7-.8-.9-1.7-1.4-2.6-.4-.7-.6-.7-.5.1-.3 1 .3 2 .6 3-.3 1.3-2 1.5-2.6 2.6-.6.3-1-.6-1.4-1l-2-2.4a58 58 0 0 1 14-9.1zm13.3 1.7c1.4 3 2.3 7.9 3.1 10.6l-9.9 1.2-2.9-7.8c3.2-1.7 6.2-2.6 9.2-4zm13 2.2c.3.6.7 1.2 1.2 1.7.1 1 1 1.4 1.3 2.2 1.3 1.9 2.9 3.5 4.1 5.4.3.7-.5 1-.7 1.5l-2.1 2.5c-.8-.5-1-1.4-1.6-2.1-2.1-2.3-3.5-5-5.1-7.6l2.8-3.6zm16.2 2 5 3.7c-1.8.2-3.6.2-5.2 1-2.3 1.3-3.6 3.3-5.4 5a6 6 0 0 1-1.7-2.1c2.1-2.8 4.6-5.3 7.3-7.6zM49 156.6c-3 0-4.3 0-10 1.7l-1-3.8c4-2.7 3.6-2.6 8.6-5.3 1 2.4 1.8 4.9 2.4 7.4zm107.5-5.3c.3.3 1 1 .5 1.3 0 .2.7.6 1.1.6-.3-1.7-.2-1-.1-2.2 1.5.9 3.7 2 4.3 3.3 0 1-1 1.6-1.5 2.4-.3.2-.9 1.3-1 .4l-.7-2.6c-.3-.3-1-.2-1 .3 0 1 .5 1.7.6 2.6 0 .5.7 1.2 0 1.5-.8 1-1.5 2.1-2.6 2.8-1.5.3-3 .3-4.5.2-.8-3.4-1.6-7.7-2.2-11 2.3-.2 5 .1 7.1.4zm-119.7 3.8c.4.3.4 1 .5 1.3l1.1 3.8.2 1.5-1.4-1.4c-.2-.2-.8-.4-.8-.7-.5-1-1.5-1.4-2-2.4.3-.8 1.2-1.2 1.8-1.8zm86 1.7c1.9 1.8 3.3 4.2 4.9 6.4-1.8.2-3.7.6-5.5.1-.3-.6-.2-1.3-.4-2-.3-1.8-.6-3-.7-5-.1-1.2 1.3 0 1.6.5zm-4.1-.7c1.8 2 2.1 4.7 2.3 7.3-3.4.3-6.8.3-10.1.5l1.6-2c.3-.6 1-1 1.2-1.5.8-.5 1.3-1.3 2-1.8l2.3-2.2c.3 0 .6-.3.7-.3zm-40 1.9 1.7 1.7c-.2 1-1 1.9-1.5 2.6l-1.1 1.5-2.9-2.7 3.3-3.8.6.7zm27.2 6.3s-1.1-.1-.6-.6c.2-.6.6-.7 1.4-1.2-.3 0 .5-.5.3-1l4-4.7c1.2-1.2 1.9-2.7 2.9-4 6.4-6.8 10.4-1 15 4.2.2.3.8.5 1.1.7.2.8-.1 1.5-.2 2.4 0 .4-.6.9-.8.2-2-3.3-4.5-6.2-7.4-8.7-.4-.4-1-.6-1.6-.3-4.5 3.8-8.2 6.6-10.7 12.5-1.1.4-2.3.4-3.4.5zm-18.6.2h-2.9c-.6.3-1.3.6-.2.9.8.3 1.8 0 2.6.1.6 0 1.5-.3 1.2.6.1.7.3 1.5.8 2 .3.6.4-.7.5-1 .1-1-.6-1.9-.5-2.7-.1-.3-1.2 0-1.5 0zm-35.1 5.6c-.5 2.2-.1 4.8 2 6.2 2.3 1.9 6 2.2 8.5.5 3-2 4.2-6.1 2.5-9.1a7.5 7.5 0 0 0-7-3.3c-2.9.1-5.4 2.9-6 5.7Zm84.6-4.8c-2 0-3.8 1-5.4 1.9-.6.7.2 1.4.3 2l4.7 9.5c2-.7 4-1.6 5.8-2.8 2.8-2.7 2.2-7.8-1.2-9.7-1.3-.6-2.7-1-4.2-.9zM59 167c2 0 4 1.5 4 3.5 0 1.9-1.4 3.7-3.3 4.5-2.2.7-4.4-1.1-4.6-3.1 0-1.6.7-3.1 2-4.2.5-.5 1.7-.7 1.9-.7zm81.5 6.6c-.5.6-1.3 1.2-2.2 1.4-1.3-2-2.3-3.6-3.5-6.4 1-.4 1.6-.8 2.7-1 4.3-.1 4.9 4.8 3 6Zm-17.3-3.6c-.3 4.4-.4 9.4-.2 13.7 0 .7.6.3 2.1-.2 1-.4.7-.4.8-.9v-2.2l3.9-1.2c.7.5 1 1.5 2 1.8 1-.3 1.8-.9 2.6-1.4-3.3-4.4-4.8-6.2-8.1-10.3l-3.1.7Zm-55.6 5.5-2.2 5.8c.8.2 1.7.7 2.6.4 1.2-2 1.7-4.4 2.8-6.5 1.3 2.8 2 5.8 3.3 8.5.5.8 1.5.9 2.3 1 1-1.7 1.2-3.6 1.8-5.3.6-2.5 1.4-4.9 1.9-7.4-.9-.4-2-.7-2.8-.3-1 2-1.2 4.4-2.1 6.4-1.2-2.5-1.8-5.4-2.5-7.9-.5-.7-1.6-.8-2.4-1-1.3 2-2 4.4-2.7 6.3zm42.7-1.8c.3 3.2 1.3 6.3 1.8 9.3.2 1 .2 2 .7 2.9.6.5 1.5 0 2.3 0 1.9-.3 3.7-.7 5.5-1.2 0-.8.3-1.7 0-2.5-1.8-.2-3.5.8-5.2.7-.8-.3-.8-1.4-.8-2 .5-.7 1.6-.5 2.3-.7.6 0 1.6 0 1.7-.7 0-.8.1-1.5-.3-2.2-1.4-.2-2.7.5-4.1.3-.3-.5-.5-1.4-.4-1.9l5.4-1.1c-.2-.8-.3-2-1.2-2.3-2.6.3-5.4.9-7.7 1.4zm-27-.7c-.6.2-.6 1-.8 1.6-.7 3.1-1.1 6.2-1.7 9.3v2c1 .4 2.1.2 3.2.4 1.7.3 3.3.7 5 .8.5-.6.6-1.4.6-2-.3-1-1.6-1-2.4-1-1-.3-2.3-.2-3.2-.7-.2-.7 0-1.5.4-2.1 1.3-.1 2.7.3 4 .2.6.1.5-.6.7-.9l.2-1.4c-1.5-.6-3-.7-4.5-.8l.4-2.4c1.8.3 3.5.8 5.4 1 .3-1 .4-1.8.4-2.7-2.5-.7-5.3-1-7.7-1.3zm44.9 3.8c-.6.4-1.4.7-2.2.9 0-1.7-.2-2.3-.1-4 0-.2.2 0 .3.2l2 2.9zm-23-2.4c0 1.4.1 3.2.3 4.5-1.5.3-3 .3-4.6.2l-.1-4.6H98c-.3 3.7 0 7.3 0 10.9v2.2h3V182h4.8c.2 2.3.5 3.2.6 5.3.8-.1 2 0 2.3-.4.3-2.6 0-5.6-.2-8.3l-.5-4.5c-1 0-2.8-.2-2.8.3z"/><path fill="#a55f02" d="M92.2 56.3a15.3 14.4 0 0 0-9.9 4.2c-2 1.9-3.6 4.3-3.3 5 .3.7 2 .6 4.2-.3a23 21.6 0 0 1 9-1.9 17 16 0 0 1 5.1.3c3.6.8 4.3.4 4-2 0-2-.5-2.5-2-3.5a12.6 11.8 0 0 0-7-1.7l-.1-.1zm37.7 0c-3 0-5.8 1-7.4 2.8-1.3 1.5-1.9 3.8-1 4.8.3.5.3.5 2.4 0a20 18.8 0 0 1 5.6-.5c3.2 0 3.9.1 6.1.8 1.5.4 3 1 3.5 1.2l1 .4c.5-.2 0-3-.5-4.2a13 12.2 0 0 0-4.6-4.3c-1.6-.6-3.3-1-5.1-1zm59 70.8c0 .4-.2.8-.4 1.2l.1 4.3.8-2.5-.4-3zM6.5 130l-.3 2 .9 2.7v-3.5l-.6-1.3zm181.1.6-.8 1.9v5.8l.8-2.5v-5.2zM8.1 133.5v4.2l.6 1.5v-4.4l-.6-1.3zm177.5 1.7-.6 1.4v5.9l.6-1.4v-6zm-175.7 2v4.8l.5 1.2v-5l-.5-1zm174 2-1 2.4.1 5.4 1-2.1-.1-5.7zm-172.4 1.4v5.2l.9 1.8v-5l-.9-2zm170.4 3.3-1 2.1v4.8l1-1.8v-5.1zM13.6 145v4.9l.9 1.7v-4.8l-.9-1.8zm166.2 3.4-1.5 2.7v4.2l1.5-2.5v-4.4zm-164.1.7v4.7l1.4 2.5v-4.7l-1.4-2.5zm161.4 3.8-2 2.8v4.8l2-3.2v-4.4zm-158.8.5v4.9a93 93 0 0 0 2.1 3.4v-5.3l-2.1-3zM174 157l-2.7 3.6v4.9c1-1.1 2-2.4 2.7-3.5v-5zm-152.5 1.4v4.9a84 84 0 0 0 2.6 3.3V162l-2.6-3.5zm148.8 3.3-3.2 3.6v5.1l3.2-3.7v-5zm-145.2 1.4v4.8l3.2 3.8v-5.2a94.1 94.1 0 0 1-3.2-3.4zm141 3.3-4.2 4v5.3l4.2-4.1v-5.2zm-136.7 1.3v5a86 86 0 0 0 4.2 4.3v-5.2a94.9 94.9 0 0 1-4.2-4zm131.3 3.8-5.2 4.4v5.5c2-1.3 3.7-3 5.2-4.5v-5.4zm-126 1.3v5.2c1.7 1.5 3.4 2.8 5.2 4.1v-4.9a96.1 96.1 0 0 1-5.2-4.4zm119.7 3.9a51.4 51.4 0 0 1-6.3 4.4v5.8c2.2-1.4 4.3-3 6.3-4.7v-5.5zM41.1 178v5.1c2 1.5 4.1 2.8 6.3 4.1v-4.9a98 98 0 0 1-6.3-4.3zm105.8 3.9a80.5 80.5 0 0 1-7.3 4v6c2.5-1.3 5-2.8 7.3-4.3V182zm-98.5 1v5a58 58 0 0 0 6.9 3.7v-4.9a99.8 99.8 0 0 1-6.9-3.7zm90.1 3.5-8.4 3.7v5.9c2.9-1 5.7-2.3 8.4-3.6v-6zm-82.1.9v4.9a91 91 0 0 0 7.9 3.4v-5.1a52 52 0 0 1-7.9-3.2zm72.6 3.2c-3.1 1.1-6.1 2.1-8.9 2.9v5.6c3-.7 6-1.6 8.9-2.6v-5.9zm-63.6.4v5.1c3 1.1 5.9 2 8.9 2.9v-5.5c-3-.7-6-1.6-8.9-2.5zm53.5 2.7a97 97 0 0 1-9.4 1.6v5.8c3.2-.4 6.3-1 9.4-1.6v-5.8zm-43.4 0v5.5c3.1.8 6.2 1.4 9.4 1.8v-5.7a97 97 0 0 1-9.4-1.6zm32.8 1.7a77 77 0 0 1-10.6.6v5.9c3.5 0 7-.2 10.6-.6v-5.9zm-22.2 0v5.8c3.5.4 7 .6 10.5.7v-6c-3.5 0-7 0-10.5-.5z"/></svg>`;
		const tailsSVG = `<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 51.647 53.869"><defs><linearGradient id="b"><stop offset="0" stop-color="#fed926"/><stop offset="1" stop-color="#d48c06"/></linearGradient><linearGradient id="a"><stop offset="0" stop-color="#fed837"/><stop offset="1" stop-color="#d99703"/></linearGradient><linearGradient xlink:href="#a" id="c" x1="20.154" x2="21.614" y1="83.245" y2="219.358" gradientTransform="matrix(.27 0 0 .25 21.179 -8.961)" gradientUnits="userSpaceOnUse"/><linearGradient xlink:href="#b" id="d" x1="26.154" x2="26.142" y1=".581" y2="24.462" gradientTransform="matrix(.98 0 0 1 .652 .042)" gradientUnits="userSpaceOnUse"/></defs><ellipse cx="25.79" cy="26" fill="url(#c)" paint-order="stroke markers fill" rx="25.459" ry="25.841"/><path fill="url(#d)" d="M33.884 38.015c-.16.186-.379.349-.454.58-.106.322.304.79.038 1.013-.116.096-.336.02-.455-.073-.19-.147-.245-.42-.265-.651-.043-.479.274-.932.303-1.412.024-.41-.114-1.23-.114-1.23s-.523.279-.796.398c-.346.15-1.061.398-1.061.398-.368-1.24-1-2.426-2.274-3.474 2.273-1.517 2.625-2.96 2.388-4.38.41.114.486.55.606.941.68-1.268 1.118-4.532-3.98-6.406 0 0-.485 1.05-.947 1.376a1.41 1.41 0 0 1-.91.253c-.41-.038-.795-.276-1.098-.543-.297-.26-.645-.977-.645-.977-2.405.444-5.418 3.133-4.32 6.153.027-.36.318-.554.644-.724-.332 2.222 1.059 3.232 2.615 4.126-1.047 1.022-1.736 1.917-2.198 3.293-.095.284-.601.265-.91.217-.325-.05-.543-.358-.833-.506-.11-.057-.341-.145-.341-.145s-.062.507-.038.76c.035.37.238.715.265 1.086.029.398-.04.8-.114 1.194-.034.184.004.429-.151.543-.14.103-.403.116-.53 0-.202-.184.045-.543-.039-.797-.085-.258-.314-.452-.455-.687-1.097-1.837-3.032-5.646-3.032-5.646l-.151-5.284.379-1.05.151 1.448c.689-2.687 2.017-5.069 4.32-6.985l1.441.145c-.845-1.313-1.94-2.885-1.63-3.004.782.44 1.328.767 1.706 1.013-.505-.819-.834-1.872-.834-3.365.752.495 1.115.768 1.364.977-.368-1.077.015-3.472 1.062-4.741.866-1.052 2.395-1.602 3.79-1.738 1.14-.11 2.34.252 3.335.797.72.394 1.3 1.03 1.743 1.7.315.479.606 1.593.606 1.593l.683-.688c.902.93.664 2.585.379 4.271l.303-.109c-.887 1.663-2.322 2.85-4.32 3.547l3.145-.036c2.167 1.777 3.954 3.861 4.813 6.696l.493 2.75-1.365 4.198s-1.188 1.885-1.895 2.75c-.126.156-.285.284-.417.435z"/><path fill="#b87302" d="M26.358 12.957a1.274 1.274 0 0 0-.437.05c-.504.159-1.019.384-1.396.756a4.931 4.931 0 0 0-1.296 2.31c-.224.919-.163 1.927.095 2.837.2.707.597 1.373 1.093 1.914a5.422 5.422 0 0 0 1.883 1.303c.851.358 1.797.54 2.72.526.746-.01 1.536-.271 2.184-.49.563-.19.984-.676 1.546-.868.384-.132 1.132-.362 1.132-.362s.56-.685.717-1.086c.113-.286.173-.6.151-.905-.012-.163-.15-.47-.15-.47l-2.944 2.533-3.244.398-3.132-1.556-.49-2.244.679-2.171 1.81-.652 2.227.76s-.417-.998-.755-1.411c-.3-.367-.667-.7-1.094-.905-.399-.191-.857-.248-1.3-.267zm-8.435 4.429s-.337.383-.34.615c-.01.854.061 1.272.175 1.897.071.389.316 1.143.316 1.143l1.132-.651zm1.434 3.62-.529.47s.568.267.868.361c.27.085.55.14.83.182.3.044.615.152.906.072.181-.05.453-.326.453-.326zm-5.132 8.196s-.287.86-.358 1.303c-.106.669-.022 1.252.06 1.924.075.61.32 1.68.683 2.444.431.906.905 1.58 1.739 2.457.343.361 1.245.85 1.245.85l-.633-1.848-1.641-2.786Zm13.092 5.411-2.565.217-2.075.797-.453 2.28.415.217s.912-.832 1.472-1.086a4.05 4.05 0 0 1 1.622-.362c.656-.005 1.383.042 1.924.398.397.261.5.792.792 1.158.277.346.906.977.906.977l-.038-3.04zm-1.343 6.943-3.015.05-1.307.18-1.867.896-3.335-.051-1.28-.973s-1.28-.194-1.868 0c-.288.095-.716.246-.72.537-.007.443.66.636 1.067.845 1.285.663 2.763.922 4.188 1.228a36.71 36.71 0 0 0 4.962.691c1.472.11 2.953.074 4.429.051 1.442-.021 2.887-.036 4.322-.179 1.416-.14 2.839-.315 4.215-.665a13.099 13.099 0 0 0 2.374-.845c.255-.12.536-.228.72-.435.19-.211.454-.508.347-.767-.145-.356-.705-.375-1.093-.46-.434-.097-1.334-.052-1.334-.052l-.987.998-3.015.384-2.775-1.433z"/><path fill="#eaa60c" stroke="#eaa60c" stroke-width=".116" d="M25.927 2.62a23.443 23.443 0 0 0-2.351.1c-2.263.207-4.51.775-6.621 1.615-1.433.57-2.765 1.39-4.017 2.285-1.46 1.043-2.834 2.23-4.036 3.567a24.413 24.413 0 0 0-3.252 4.578c-.883 1.615-1.516 3.364-2.07 5.118-.515 1.628-.972 3.294-1.159 4.998-.146 1.333.037 3.99.037 3.998v.003l.12-.003v-.004c0-.008.02-2.232.18-3.32.363-2.461.833-4.943 1.762-7.24 1.05-2.596 2.446-5.1 4.24-7.233 1.634-1.943 3.66-3.568 5.807-4.912a19.264 19.264 0 0 1 4.953-2.188c1.974-.558 4.046-.894 6.094-.832 2.775.086 5.594.59 8.174 1.63 2.61 1.053 5.047 2.647 7.127 4.56 1.908 1.756 3.467 3.92 4.738 6.192 1.093 1.957 1.84 4.116 2.415 6.29.503 1.902.888 5.861.888 5.861l.12-.006v-.007c0-.006-.036-1.44-.18-3.218-.142-1.782-.391-3.902-.82-5.269-.854-2.715-2.264-5.292-4.027-7.516a25.368 25.368 0 0 0-6.683-5.876c-2.135-1.294-4.54-2.165-6.971-2.69a22.017 22.017 0 0 0-4.468-.482Z"/><path fill="#fef26b" d="M51.015 26.083s-.539-4.03-1.09-5.989c-.613-2.175-1.318-4.363-2.45-6.346-1.314-2.3-2.94-4.499-4.955-6.296-2.194-1.958-4.78-3.603-7.568-4.709-2.755-1.093-5.779-1.652-8.765-1.791-2.208-.103-4.448.194-6.588.716a21.705 21.705 0 0 0-5.39 2.099c-2.344 1.305-4.564 2.895-6.37 4.811-1.984 2.105-3.545 4.586-4.737 7.166-1.055 2.285-1.62 4.76-2.069 7.216-.2 1.097-.272 3.327-.272 3.327s-.132-2.673.055-3.992c.24-1.694.77-3.348 1.36-4.965.637-1.741 1.357-3.475 2.342-5.067A24.662 24.662 0 0 1 8.11 7.76c1.32-1.31 2.822-2.468 4.41-3.48 1.364-.87 2.81-1.662 4.356-2.201A27.285 27.285 0 0 1 24.009.594c2.432-.165 4.92-.01 7.295.511 2.593.57 5.15 1.485 7.405 2.815 2.677 1.58 5.1 3.631 7.023 5.989a23.835 23.835 0 0 1 4.138 7.575c.907 2.761 1.145 8.599 1.145 8.599z"/><path fill="#fef26b" d="M49.316 24.999s-.412 4.062-.916 6.04c-.519 2.032-1.214 4.041-2.155 5.937-1.023 2.059-2.119 4.16-3.76 5.834a22.403 22.403 0 0 1-7.228 4.914c-2.705 1.138-5.729 1.652-8.69 1.791-2.188.103-4.409-.194-6.53-.716a21.404 21.404 0 0 1-5.343-2.099c-2.323-1.305-4.58-2.859-6.314-4.81-1.811-2.038-3.09-4.491-4.07-6.976-.861-2.18-1.207-4.519-1.538-6.821-.15-1.041-.203-3.145-.203-3.145s-.1 2.522.04 3.773c.179 1.587.568 3.153 1.012 4.693.47 1.628.935 3.281 1.74 4.79a20.427 20.427 0 0 0 3.289 4.504c1.279 1.33 2.796 2.468 4.371 3.48 1.353.87 2.786 1.662 4.318 2.201 2.262.797 4.662 1.32 7.07 1.485 2.41.164 4.89.049 7.232-.512 2.525-.605 4.991-1.615 7.12-3.02 2.301-1.518 4.282-3.506 5.866-5.681 1.582-2.17 2.725-4.642 3.5-7.166.841-2.746 1.19-8.496 1.19-8.496z"/><path fill="#eeb312" d="M48.713 24.462s-.041 3.927-.478 5.835c-.467 2.038-1.27 4.02-2.264 5.886-1.021 1.915-2.214 3.795-3.76 5.374-1.993 2.033-4.287 3.938-6.954 5.118-2.68 1.186-5.729 1.652-8.69 1.791-2.188.103-4.409-.194-6.53-.716-1.866-.46-3.715-1.127-5.343-2.099-2.442-1.459-4.621-3.356-6.424-5.476-1.632-1.92-2.907-4.126-3.851-6.412-.885-2.144-1.358-4.438-1.647-6.72-.135-1.058-.038-3.195-.038-3.195s-.22 2.552-.124 3.824c.116 1.55.401 3.095.847 4.59a24.533 24.533 0 0 0 1.96 4.688c.861 1.587 1.845 3.14 3.068 4.504 1.318 1.47 2.869 2.772 4.536 3.89 1.385.93 2.89 1.731 4.482 2.303 2.225.8 4.582 1.384 6.96 1.536 2.49.159 5.055-.019 7.452-.665a21.904 21.904 0 0 0 6.846-3.225 23.966 23.966 0 0 0 5.866-5.937c1.495-2.164 2.538-4.62 3.225-7.115.696-2.524.861-7.78.861-7.78z"/><path fill="#844a00" d="M26.81.034c-1.432-.021-3.304.036-4.093.144-3.979.545-7.131 1.67-10.495 3.744-1.98 1.22-3.992 2.92-5.625 4.753-2.72 3.053-4.483 6.368-5.61 10.557-.608 2.255-.836 3.848-.89 6.197-.283 2.204.177 3.657.396 5.32.03.182.047.342.082.532C2.56 44.258 13.297 53.816 25.917 53.84c16.981-.847 23.885-13.056 25.196-22.315.453-2.405.523-3.147.526-5.54.003-2.656-.128-3.852-.67-6.098-.628-2.604-1.89-5.702-3.15-7.737-1.436-2.315-3.655-4.826-5.76-6.518A25.64 25.64 0 0 0 28.037.082c-.322-.025-.75-.041-1.227-.048Zm-1.115.524c2.328-.004 4.655.28 6.713.84 5.917 1.61 11.155 5.455 14.53 10.667 2.01 3.105 3.424 7.157 3.87 11.091.145 1.279.143 3.901-.007 5.288-.51 4.768-2.292 9.171-5.254 12.982-2.261 2.909-4.9 5.132-8.017 6.756-1.932 1.006-2.861 1.378-4.879 1.952-1.574.447-3.164.715-4.95.832-1.54.101-3.819.027-5.019-.164a19.753 19.753 0 0 0-.491-.068c-.872-.11-2.577-.5-3.756-.86-3.93-1.2-7.791-3.574-10.687-6.569-.422-.418-.608-.634-.914-.98-.352-.403-1.145-1.418-1.367-1.751l-.532-.794c-1.326-1.973-2.657-4.97-3.311-7.455-.68-2.584-.882-4.332-.825-7.127.058-2.803.314-4.405 1.137-7.106.443-1.457.99-2.758 1.823-4.335 1.579-2.991 3.526-5.376 6.168-7.553C13.291 3.433 17.442 1.532 21.56.88a26.834 26.834 0 0 1 4.136-.321Zm-.13 1.497a21.1 21.1 0 0 0-2.215.098c-4.32.472-8.34 2.06-11.76 4.644-.723.547-2.293 1.987-2.923 2.682-3.617 3.99-5.736 8.768-6.285 14.179-.115 1.124-.113 3.602.002 4.59a25.04 25.04 0 0 0 4.451 11.605c1.382 1.939 3.597 4.148 5.472 5.456 3.382 2.36 7.77 3.917 11.85 4.205 5.726.479 11.761-1.102 16.273-4.936 1.677-1.31 3.732-3.561 4.958-5.43 2.154-3.287 3.444-6.863 3.838-10.638.214-2.056.099-4.936-.29-7.222-.525-3.095-2.056-6.697-4.023-9.465a23.365 23.365 0 0 0-9.038-7.543 24.37 24.37 0 0 0-6.423-1.963c-1.037-.168-2.52-.26-3.886-.262Zm-.04.655c1.03 0 3.041.162 4.027.323 2.713.442 5.31 1.4 7.867 2.899 2.733 1.602 5.118 3.8 7 6.452a22.863 22.863 0 0 1 3.225 6.651c.132.45.271.908.309 1.016.037.109.145.595.24 1.082.912 4.665.39 9.838-1.412 13.999-1.32 3.047-3.155 5.651-5.503 7.814-1.113 1.025-1.84 1.597-2.92 2.301-2.79 1.818-5.787 2.942-9.041 3.39-.425.059-.867.122-.983.14-.38.06-4.058.082-4.634.028-2.346-.221-5.375-1.05-7.54-2.064-2.157-1.011-3.902-2.172-5.612-3.735-2.203-2.014-3.6-3.83-4.996-6.497-.468-.895-1.152-2.445-1.405-3.186-.438-1.28-.883-3.164-1.099-4.65-.16-1.1-.18-4.478-.034-5.573.742-5.567 3.3-10.657 7.189-14.308 4.198-3.94 9.606-6.087 15.323-6.082Zm-1.123 1.416c.162.927.44 2.054.744 3.053.072.125.506.168.675.067.262-.362.391-.678.594-1.093.119.327.345.64.41.98 0 .098.217.163.547.165.2 0 .246-.032.336-.232.253-.567.952-2.665.916-2.753-.043-.102-.571-.136-.721-.046-.076.046-.499 1.285-.57 1.671-.018.1-.053.18-.078.179-.18-.203-.838-1.624-.852-1.255-.128.239-.731 1.445-.803 1.186a51.412 51.412 0 0 1-.21-.97c-.094-.447-.196-.836-.228-.865-.26-.08-.477-.073-.76-.087Zm5.124.303c-.356.242-.588 2.1-.614 2.66l-.017.501c.428.046.87.12 1.264.222.808.21.803.213.912-.297.05-.234.036-.24-.933-.423l-.443-.083c.034-.187.06-.38.123-.559.378.057.71.086 1.087.146.03-.029.075-.174.1-.323.053-.306.08-.288-.617-.417-.22-.04-.418-.099-.438-.129-.02-.03.033-.375.058-.491.408.052 1.014.222 1.386.34l.102-.185c.14-.253.13-.502-.02-.543-.65-.115-1.297-.34-1.95-.419Zm-9.007.324c-.069 0-.139.003-.21.01-.48.046-1.49.368-1.541.491-.04.095.866 2.804.985 2.946.09.11.062.114.894-.148 1.198-.377 1.594-.722 1.662-1.454.093-.99-.752-1.833-1.79-1.845Zm.46.85c.252.146.506.557.508.825.003.273-.218.668-.444.797-.275.155-.65.234-.707.148a12.036 12.036 0 0 1-.311-.774c-.148-.39-.293-.762-.323-.825-.042-.091-.001-.136.197-.213.358-.124.77-.132 1.08.043zm13.15.188a1.38 1.38 0 0 0-.253.496c0 .386.386.283.6.56-.317.727-.763 1.645-.93 2.157.176.108.355.195.569.313.31-.402.775-1.399 1.14-2.05.356.015.557.184.9.36l.383-.61c-.784-.52-1.72-.903-2.41-1.226Zm-18.162.559c.094.881.257 2.293.44 3.255.058.088.335.062.503-.048.127-.083.156-.166.157-.443l.001-.34 1.05-.491.234.239c.259.263.416.269.75.027l.174-.128c-.792-.834-1.519-1.781-2.28-2.5-.287.006-.902.194-1.029.429zm.83.523c.036-.034.76.807.76.882 0 .036-.124.125-.276.197-.258.123-.279.124-.314.018-.058-.178-.197-1.072-.17-1.097Zm-2.527.393c-.651.435-1.318.859-1.928 1.344.468.63.85 1.155 1.237 1.63.687.847.772.928.885.85.51-.321 1.106-.675 1.62-1.125-.096-.199-.247-.305-.418-.458l-1.125.693-.345-.457.455-.306c.25-.168.474-.351.496-.406.044-.106-.294-.488-.428-.485-.041.001-.263.13-.494.286l-.419.285-.195-.23-.194-.228c.305-.25.658-.496 1.192-.888-.062-.21-.194-.337-.339-.505Zm22.773.033c-.679 1.022-1.25 1.685-1.724 2.65 0 .068.442.431.525.431.04 0 .158-.14.263-.311.324-.528.294-.506.528-.377.205.113.208.123.174.56-.043.566.01.759.277.99.347.304.408.258.422-.32.007-.28.007-.575.005-.657-.008-.126.026-.147.235-.147.59 0 1.081-.474 1.081-1.042 0-.534-.284-.88-1.168-1.418-.205-.12-.408-.25-.618-.36Zm.792 1.301c.232.203.284.435.15.67-.094.163-.375.16-.713-.007-.353-.174-.368-.217-.178-.503a2.76 2.76 0 0 0 .212-.366c.15-.192.457.144.53.206zm-13.142.145c-1.164.197-2.278.752-3.24 1.432-1.424 1.007-2.426 2.663-2.693 4.45l-.082.543c-.055.367-.654-.452-.917-.244-.36.299-.466 1.312-.268 2.568.229 1.202.556 1.887 1.16 2.808-.727.533-1.454 1.09-2.083 1.722-1.184 1.205-2.12 2.975-2.515 4.76-.285 1.283-.354 2.45-.215 3.666.137 1.212.244 1.721.552 2.623.398 1.165.722 1.732 1.917 3.353.417.566.698 1.278.763 1.932.058.576-.004.68-.553.937-.861.404-1.583 1.291-1.659 2.038-.092.916.72 1.583 2.264 1.864.337.06.861.085 1.57.071 2.165.001 3.396-.714 3.84-2.563.083-.32.251-1.709.357-2.948.08-.947.209-1.409.52-1.882.21-.318.508-.522 1.092-.75.452-.175.543-.186 1.478-.188.931-.001 1.026.01 1.43.175.826.337 1.249.787 1.46 1.551.137.501.168.772.31 2.73.048.656.26 1.625.448 2.043.541 1.31 1.548 1.547 2.567 1.767.711.139 2.4.096 3.03-.077.296-.092.598-.2 1.013-.414.495-.33.706-.734.706-1.35 0-.85-.532-1.548-1.555-2.037-.279-.134-.53-.276-.557-.317-.08-.116-.057-.756.044-1.203.122-.545.364-1 .885-1.663.608-.774.949-1.315 1.234-1.96.685-1.548.952-2.714 1.058-4.618.161-2.915-1.24-6.226-3.454-8.161-.414-.362-.964-.754-1.134-.808-.036-.011.15-.24.413-.507.747-.763 1.381-1.866 1.58-2.747.194-.863.031-1.755-.318-1.743-.146.005-.154-.02-.155-.459-.002-1.51-.594-3.227-1.352-3.916-.348-.317-.767-.58-.923-.58-.18 0-.285.23-.257.564.013.158.008.288-.012.288s-.097-.107-.17-.238c-.158-.278-1.722-1.71-2.824-2.128-1.486-.565-3.187-.65-4.755-.384Zm-13.145.52c-.256.146-.396.326-.604.54l.892.848-.964.842-.945-.783-.177.179c-.41.412-.453.336.839 1.504.647.585 1.226 1.065 1.286 1.065.224-.078.341-.223.506-.384l-.192-.217c-.105-.12-.333-.357-.507-.528l-.315-.31c.386-.395.637-.607.948-.854.04 0 .292.223.56.496l.49.495c.16-.156.374-.304.471-.496 0-.087-1.285-1.52-1.81-2.02-.218-.207-.433-.376-.478-.376zm20.321 2.596c.773.743.86 1.882.827 2.048-.016.084-.004.128.028.098.067-.064.267-1.61.268-2.07 0-.17.029-.311.063-.311 1.396 1.555 1.307 4.685.37 5.815-.226.264-.238.293-.089.218.095-.047.395-.37.748-.617l.576-.531-.036.453c-.177 2.209-3.59 4.233-5.546 4.148-1.52-.112-3.012-.982-3.565-2.077-.65-1.288-.34-2.94.676-3.601.385-.25.676-.333 1.171-.333.62 0 1.065.16 1.444.523.696.664.702 1.714.011 2.216-.193.14-.315.175-.63.177-.328.001-.435-.03-.652-.187-.364-.265-.486-.57-.403-1.008.074-.39.039-.415-.302-.216-.582.338-.551 1.172.062 1.672.388.317.855.453 1.42.414 1.122-.076 1.68-.767 1.668-2.066-.004-.474-.035-.619-.208-.97a2.532 2.532 0 0 0-1.214-1.212c-.38-.184-.547-.224-1.034-.248-.931-.047-1.615.203-2.238.82-.699.69-.956 1.31-1.003 2.413-.05 1.186.166 1.831.912 2.724.45.538.931.926 1.47 1.21 2.333.886 3.795.437 4.592.214.218-.074.434-.134.655-.231l.532-.233.29.125c.738.316 1.75 1.193 2.42 2.094 1.144 1.54 1.855 3.481 1.944 5.309.05 1.158-.11 2.358-.359 3.442-.274 1.194-.837 2.37-1.647 3.444-.293.387-.62.884-.729 1.105-.48.981-.648 2.317-.354 2.841.168.3.327.412.588.412.24 0 .771.301 1.087.615.674.669.517 1.531-.302 1.658l-.256.04.042-.293c.065-.454-.277-.992-.747-1.161-.164-.06-.189-.052-.189.052 0 .066.065.2.143.295.25.303.295.59.142.92-.125.269-.16.294-.51.369-.62.132-1.778.054-2.31-.156-1.206-.475-1.486-1.11-1.658-3.765-.15-2.301-.698-3.379-2.024-3.98-.674-.306-1.165-.393-2.204-.389-.775.004-.967.027-1.45.178-.892.28-1.5.785-1.907 1.585-.353.692-.444 1.117-.562 2.623-.132 1.689-.238 2.22-.568 2.852-.311.599-.661.854-1.386 1.01-.444.097-1.718.132-2.115.059-.084-.016-.234-.121-.334-.234-.153-.174-.176-.25-.143-.476.021-.148.102-.411.18-.586.079-.174.13-.329.113-.345-.085-.08-.487.227-.705.54-.22.316-.243.389-.203.63l.046.272-.25-.039c-.765-.118-.977-.798-.468-1.498.311-.429.887-.776 1.287-.776.189 0 .457-.298.583-.649.274-1.02-.153-1.96-.525-2.998-.366-.41-1.242-1.585-1.632-2.352-.463-.911-.766-1.872-.96-3.049-.144-.86-.089-2.937.098-3.755.23-1 .74-2.24 1.26-3.062.929-1.278 1.865-2.223 3.132-3.074.568.352 1.143.724 1.764.972.524.205.579.213 1.238.182.379-.018.782-.07.895-.116l.206-.084-.275-.05c-.553-.1-1.737-.623-2.337-1.033-1.229-.839-1.837-1.595-2.225-2.766-.264-.8-.453-2.107-.3-2.093.077.008 1.275 1.293 1.38 1.481.144.262.161.142.052-.379-.285-1.366-.31-1.974-.11-2.83.198-.858.854-2.341 1.035-2.342.022 0-.005.34-.06.754a6.157 6.157 0 0 0-.046 1.328c.056.64.124.592.2-.147.066-.642.162-1.061.611-1.717 1.034-1.51 2.347-2.534 4.795-2.582 2.779-.056 4.24.89 5.746 2.337zm7.912-2.399c-.015 0-.236.237-.492.526-1.01 1.14-1.18 1.479-1.022 2.03.091.316.562.83.878.959.258.106.592.114.856.023.194-.068 1.652-1.364 1.784-1.586.047-.081.035-.161-.044-.274-.197-.28-.302-.26-.797.14-.296.235-.616.523-.873.73-.498.401-.91.36-1.063-.107-.073-.222.166-.62.769-1.281.29-.318.527-.618.527-.666 0-.074-.445-.494-.523-.494zm2.551 3.017c-.44 0-.77.21-.893.57-.084.248-.076.331.088.894.19.649.182.83-.034.83-.202 0-.483-.405-.575-.828-.095-.434-.138-.48-.449-.482-.326-.002-.383.218-.213.828.101.365.514.888.855 1.083.119.067.344.12.516.12.256 0 .345-.037.552-.23.243-.227.246-.237.212-.672a6.19 6.19 0 0 0-.129-.822c-.103-.42-.05-.588.198-.623.189-.026.485.309.587.662.101.355.18.44.407.439.363-.002.392-.073.224-.544-.286-.802-.75-1.225-1.346-1.225zM7.726 13.693c-.08.046-.278.465-.278.587.54.393 1.026.596 1.668.918-.578.102-1.158.213-1.742.269-.422.038-.514.07-.659.231-.185.205-.298.566-.204.65.033.029.328.185.656.347.715.262 1.277.804 2.001 1.027.087 0 .386-.479.386-.618-.246-.281-2.028-.964-1.667-1.006.628-.058 2.216-.309 2.287-.362.085-.063.363-.52.363-.597 0-.082-2.735-1.49-2.811-1.446zm36.537.818c-.176 0-.59.204-.59.29 0 .051.064.23.14.398.078.169.141.33.141.359-.638.353-1.362.637-2.074 1.12-.103.106-.1.137.035.384.099.18.193.268.288.268.122 0 1.551-.686 2.011-.966.2-.121.267-.077.48.315.146.27.207.323.367.321.221-.002.438-.134.438-.267 0-.155-1.15-2.222-1.236-2.222zM6.065 17.199c-.137 0-.302.276-.302.506 0 .178.038.23.228.308.805.35 1.696.74 2.487 1.02.1.003.455-.668.387-.73-.835-.327-1.935-.795-2.8-1.104Zm21.118 6.163c-.123-.013-.366.166-.785.558l-.597.557-.305-.187a4.578 4.578 0 0 1-.573-.43c-.238-.218-.28-.233-.371-.146-.088.084-.09.131-.014.316.119.288.685 1.012.859 1.098.256.127.645.033.986-.24.444-.354.904-1.017.904-1.302 0-.14-.03-.217-.104-.224zm7.315 1.312c-.08 0 .249.57.822 1.424.247.369.458.662.468.652.046-.044-.149-.57-.356-.964-.219-.414-.805-1.112-.934-1.112zM16.435 26c-.022-.019-.102.054-.239.218-.271.325-.535.972-.578 1.422-.056.59.087.462.332-.294.12-.369.289-.826.377-1.016.094-.202.13-.312.108-.33zm8.893 1.197-.163.394a2.68 2.68 0 0 0-.187.918l-.024.524.206-.59c.143-.41.2-.69.187-.918zm.338 1.114c-.053.08-.143.507-.108 1.296.013.298.115.322.174.04-.011-.277.086-1.57-.066-1.336z"/><path fill="#ac6e1a" d="m50.213 33.434-.144.348c.032.386.015.853.015 1.265.096-.259.164-.499.238-.75zm-48.472.759-.067.534c.08.278.16.526.243.776v-.95l-.176-.36Zm48.041.28-.17.41c.012.495.006 1.019.006 1.524.058-.158.108-.32.164-.48zm-47.564.698v1.154c.054.138.109.274.165.411v-1.228l-.165-.337zm47.098.424-.163.384c.038.484.016 1.056.016 1.568l.147-.36zm-46.632.532v1.33l.147.333v-1.36c-.05-.101-.097-.203-.147-.304Zm46.184.523-.27.634c.108.37.037.997.037 1.437.067-.134.135-.267.197-.403.025-.054.047-.11.072-.163-.105-.396-.036-1.04-.036-1.505zm-45.735.405v1.405c.074.158.155.315.232.472l.069-1.254c-.1-.208-.202-.415-.301-.623Zm45.2.851c-.082.188-.174.372-.261.559.002.426.001.859.001 1.288.088-.152.176-.304.26-.458zm-44.666.249v1.39c.083.159.174.314.26.472l.046-1.197c-.12-.234-.19-.43-.306-.665Zm44.105.943c-.126.245-.26.486-.4.724v1.108c.142-.223.274-.455.4-.666zm-43.544.147v1.319c.028.047.052.096.08.143.103.177.214.35.321.526v-1.267l-.012-.02c-.136-.23-.262-.466-.389-.701zm42.842 1.06a17.94 17.94 0 0 1-.541.785v1.187c.186-.283.363-.57.54-.86zm-42.14.163v1.259c.175.273.358.541.542.81V41.33a29.319 29.319 0 0 1-.542-.863Zm41.297 1.02c-.22.287-.446.572-.681.85v1.287c.244-.292.489-.626.681-.901zm-40.454.287v1.193c.22.308.447.613.681.912v-1.191a15.807 15.807 0 0 1-.681-.914Zm39.471.904c-.267.305-.54.604-.821.897v1.37c.28-.315.554-.634.821-.957zm-38.488.375v1.194c.14.171.275.345.42.512.13.151.267.296.402.443v-1.228c-.282-.301-.555-.61-.822-.921Zm37.365.836a24.34 24.34 0 0 1-1.102 1.075v1.444c.381-.363.746-.742 1.102-1.129zm-36.242.392v1.25c.353.368.723.72 1.103 1.065v-1.243a25.312 25.312 0 0 1-1.103-1.072Zm34.838.95c-.447.4-.909.784-1.383 1.155v1.456c.49-.366.968-.78 1.383-1.158zm-33.434.398v1.242c.467.414.923.778 1.384 1.133v-1.239a22.52 22.52 0 0 1-1.384-1.136Zm31.75.997a21.8 21.8 0 0 1-1.665 1.155v1.431a28.318 28.318 0 0 0 1.664-1.143zm-30.065.359v1.25c.538.402 1.093.786 1.664 1.144v-1.251a27.683 27.683 0 0 1-1.664-1.143Zm28.098.984a24.49 24.49 0 0 1-1.945 1.04v1.501a29.577 29.577 0 0 0 1.945-1.099zm-26.132.355v1.235c.59.363 1.235.71 1.804 1.002v-1.25c-.618-.298-1.22-.63-1.804-.987zm23.886.83c-.744.349-1.557.708-2.226.977v1.54c.816-.302 1.516-.647 2.226-1.008zm-21.78.3v1.253c.68.338 1.374.652 2.085.922v-1.344a22.626 22.626 0 0 1-2.085-.83zm19.253.798c-.832.284-1.616.6-2.367.76v1.491a20.693 20.693 0 0 0 2.367-.72zm-16.866.13v1.352c.774.292 1.629.53 2.366.714v-1.41c-.8-.184-1.59-.402-2.366-.656zm14.198.697c-.824.189-1.662.322-2.507.413v1.51c.912-.12 1.715-.248 2.507-.427zm-11.53.024v1.41c.827.197 1.663.36 2.506.478v-1.457a25.405 25.405 0 0 1-2.506-.43zm8.722.422c-.968.096-1.922.145-2.825.165v1.527a25.993 25.993 0 0 0 2.825-.18zm-5.914.042v1.465c.98.121 1.874.179 2.787.186v-1.527a23.511 23.511 0 0 1-2.787-.124z"/></svg>`;
		const unknownSVG = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 51.65 53.87"><path fill="#ecf0f1" d="M21.28 15.06c-1.67 1-2.98 2.01-4.5 3.14l-3.8-4.88C16.66 8.2 23.46 6.2 29.53 6.97c3.59.37 7.46 2.27 8.62 5.93 1.59 4.7-.51 10.1-4.43 12.99-1.46 1.23-3.54 2.03-3.96 4.1-.27 1.33.43 3.2-.97 3.03h-6.55c-.07-2.72-.06-5.76 1.88-7.9 1.49-1.96 3.86-2.94 5.46-4.75 1.3-1.58 1.83-4.41-.05-5.77-2.06-1.38-5.97-.63-8.25.46zm4.68 31.99c-3.37.18-6.02-3.7-4.72-6.8 1.04-2.99 5.13-4.26 7.66-2.32 2.44 1.71 2.84 5.65.59 7.69a4.89 4.89 0 0 1-3.53 1.43z"/></svg>`;
	
		// Функция для прокрутки к нижней части интерфейса
		function scrollToGameControls() {
			const controls = document.querySelector('.control-grid');
			if (controls) {
				controls.scrollIntoView({ 
					behavior: 'smooth', 
					block: 'end',
					inline: 'nearest'
				});
			}
		}

	
        // Состояние игры
        const gameState = {
            active: 7,
            hand: [],
            chest: [],
            phase: null, // null, 'betting', 'reveal', 'effects'
            selectedCoin: null,
            history: [],
            future: [],
            isEarlyEnd: false
        };
        
        // Элементы DOM
        const dom = {
            activeCount: document.getElementById('active-count'),
            handCount: document.getElementById('hand-count'),
            chestHeadsCount: document.getElementById('chest-heads-count'),
            chestTailsCount: document.getElementById('chest-tails-count'),
            handCoins: document.getElementById('hand-coins'),
            chestCoins: document.getElementById('chest-coins'),
            phaseIndicator: document.getElementById('phase-indicator'),
            notification: document.getElementById('notification'),
            processingNotification: document.getElementById('processing-notification'),
            processingMessage: document.getElementById('processing-message'),
            processingProgress: document.getElementById('processing-progress'),
            
            // Кнопки
            startRoundBtn: document.getElementById('start-round-btn'),
            resolutionButtons: document.getElementById('resolution-buttons'),
            majorityHeadsBtn: document.getElementById('majority-heads-btn'),
            majorityTailsBtn: document.getElementById('majority-tails-btn'),
            inflationResolveBtn: document.getElementById('inflation-resolve-btn'),
            headsBtn: document.getElementById('heads-btn'),
            tailsBtn: document.getElementById('tails-btn'),
            showChestBtn: document.getElementById('show-chest-btn'),
            endGameBtn: document.getElementById('end-game-btn'),
            undoBtn: document.getElementById('undo-btn'),
            redoBtn: document.getElementById('redo-btn'),
            
            // Модальные окна
            chestModal: document.getElementById('chest-modal'),
            endgameModal: document.getElementById('endgame-modal'),
            closeChestBtn: document.getElementById('close-chest-btn'),
            newGameBtn: document.getElementById('new-game-btn'),
            victoryBtn: document.getElementById('victory-btn'),
            defeatBtn: document.getElementById('defeat-btn'),
            drawBtn: document.getElementById('draw-btn'),
            outcomeMessage: document.getElementById('outcome-message'),
            modalHeadsCount: document.getElementById('modal-heads-count'),
            modalTailsCount: document.getElementById('modal-tails-count'),
            endgameMessage: document.getElementById('endgame-message')
        };
        
        // Инициализация игры
        function initGame() {
            gameState.active = 7;
            gameState.hand = [];
            gameState.chest = [];
            gameState.phase = null;
            gameState.selectedCoin = null;
            gameState.history = [];
            gameState.future = [];
            gameState.isEarlyEnd = false;
            
            updateCounters();
            updateUI();
            showNotification("Новая игра начата!");
			setTimeout(scrollToGameControls, 500);
        }
        
        // Обновление счетчиков с иконками
        function updateCounters() {
            updateCounter('active-count', gameState.active);
            updateCounter('hand-count', gameState.hand.length);
            
            // Обновляем счетчики сундука с разделением по типам
            const headsCount = gameState.chest.filter(coin => coin.side === 'heads').length;
            const tailsCount = gameState.chest.filter(coin => coin.side === 'tails').length;
            dom.chestHeadsCount.textContent = headsCount;
            dom.chestTailsCount.textContent = tailsCount;
        }
        
        function updateCounter(elementId, count) {
            const container = document.getElementById(elementId);
            container.innerHTML = '';
            for (let i = 0; i < count; i++) {
                const coin = document.createElement('div');
                coin.className = 'coin-counter';
                container.appendChild(coin);
            }
        }
        
        // Сохранить состояние для отмены
        function saveState() {
            gameState.history.push(JSON.parse(JSON.stringify({
                active: gameState.active,
                hand: [...gameState.hand],
                chest: [...gameState.chest],
                phase: gameState.phase
            })));
            gameState.future = [];
        }
        
        // Отменить последнее действие
        function undo() {
            if (gameState.history.length === 0) return;
            
            gameState.future.push(JSON.parse(JSON.stringify({
                active: gameState.active,
                hand: [...gameState.hand],
                chest: [...gameState.chest],
                phase: gameState.phase
            })));
            
            const prevState = gameState.history.pop();
            gameState.active = prevState.active;
            gameState.hand = prevState.hand;
            gameState.chest = prevState.chest;
            gameState.phase = prevState.phase;
            gameState.selectedCoin = null;
            
            updateCounters();
            updateUI();
            showNotification("Действие отменено");
        }
        
        // Повторить отмененное действие
        function redo() {
            if (gameState.future.length === 0) return;
            
            gameState.history.push(JSON.parse(JSON.stringify({
                active: gameState.active,
                hand: [...gameState.hand],
                chest: [...gameState.chest],
                phase: gameState.phase
            })));
            
            const nextState = gameState.future.pop();
            gameState.active = nextState.active;
            gameState.hand = nextState.hand;
            gameState.chest = nextState.chest;
            gameState.phase = nextState.phase;
            gameState.selectedCoin = null;
            
            updateCounters();
            updateUI();
            showNotification("Действие повторено");
        }
        
        // Автоматическое выделение следующей монеты
        function autoSelectCoin() {
            // Находим первую монету без выбранной стороны
            const unselectedCoin = gameState.hand.find(coin => coin.side === null);
            gameState.selectedCoin = unselectedCoin ? unselectedCoin.id : null;
        }
        
        // Начать новый раунд
        function startRound() {
            if (gameState.phase !== null) return;
            
            saveState();
            
            // Пополнение руки (если есть монеты в активе)
            if (gameState.active > 0) {
                gameState.hand.push({
                    id: Date.now(),
                    side: null // Сторона еще не выбрана
                });
                gameState.active--;
            }
            
            // Сброс сторон для оставшихся монет
            gameState.hand.forEach(coin => {
                coin.side = null;
            });
            
            gameState.phase = 'betting';
            autoSelectCoin();
            
            updateCounters();
            updateUI();
            showProcessingNotification("Раунд начат! Выберите сторону для монет в руке.", 2000);
			setTimeout(scrollToGameControls, 300);
        }
        
        // Выбрать сторону для монеты
        function selectSide(side) {
            if (gameState.phase !== 'betting' || !gameState.selectedCoin) return;
            
            saveState();
            
            // Находим монету и устанавливаем сторону
            const coinIndex = gameState.hand.findIndex(coin => coin.id === gameState.selectedCoin);
            if (coinIndex !== -1) {
                gameState.hand[coinIndex].side = side;
            }
            
            // Проверяем, все ли монеты выбраны
            const allSelected = gameState.hand.every(coin => coin.side !== null);
            if (allSelected) {
                // Автоматический переход к фазе раскрытия
                saveState();
                gameState.phase = 'reveal';
                showProcessingNotification("Все монеты выбраны! Определите большинство.", 2000);
                updateUI();
            } else {
                autoSelectCoin();
                updateUI();
            }
        }
        
        // Анимация перемещения монеты
        function animateCoinMove(fromElement, toElement, side, callback) {
            const fromRect = fromElement.getBoundingClientRect();
            const toRect = toElement.getBoundingClientRect();
            
            const animation = document.createElement('div');
            animation.className = `coin-move-animation ${side}`;
            animation.style.left = `${fromRect.left + fromRect.width/2 - 25}px`;
            animation.style.top = `${fromRect.top + fromRect.height/2 - 25}px`;
            animation.style.width = '50px';
            animation.style.height = '50px';
            animation.style.borderRadius = '50%';
            animation.style.display = 'flex';
            animation.style.alignItems = 'center';
            animation.style.justifyContent = 'center';
            
            // Используем SVG для анимации
            if (side === 'heads') {
                animation.innerHTML = headsSVG;
            } else {
                animation.innerHTML = tailsSVG;
            }
            
            // Настройка стилей для SVG
            animation.querySelector('svg').style.width = '100%';
            animation.querySelector('svg').style.height = '100%';
            
            document.body.appendChild(animation);
            
            setTimeout(() => {
                animation.style.transition = 'all 0.8s ease-in-out';
                animation.style.left = `${toRect.left + toRect.width/2 - 25}px`;
                animation.style.top = `${toRect.top + toRect.height/2 - 25}px`;
            }, 10);
            
            setTimeout(() => {
                animation.remove();
                if (callback) callback();
            }, 900);
        }
        
        // Определить большинство
        function resolveMajority(outcome) {
            if (gameState.phase !== 'reveal') return;
            
            saveState();
            
            if (outcome === 'inflation') {
                // Инфляция - все монеты остаются в руке
                showProcessingNotification("Инфляция! Все монеты остаются в руке.", 2000);
                proceedToEffects();
            } else {
                // Перемещаем монеты большинства в сундук
                const majorityCoins = gameState.hand.filter(coin => coin.side === outcome);
                
                // Анимация перемещения монет
                if (majorityCoins.length > 0) {
                    const fromElement = dom.handCount;
                    const toElement = outcome === 'heads' ? dom.chestHeadsCount : dom.chestTailsCount;
                    
                    // Анимация для каждой монеты
                    majorityCoins.forEach((coin, index) => {
                        setTimeout(() => {
                            animateCoinMove(fromElement, toElement, coin.side, () => {
                                // После анимации добавляем монету в сундук
                                gameState.chest.push(coin);
                                
                                // Удаляем из руки
                                gameState.hand = gameState.hand.filter(c => c.id !== coin.id);
                                
                                updateCounters();
                                
                                // После последней анимации переходим к эффектам
                                if (index === majorityCoins.length - 1) {
                                    proceedToEffects();
                                }
                            });
                        }, index * 300);
                    });
                } else {
                    proceedToEffects();
                }
                
                showProcessingNotification(`Большинство: ${outcome === 'heads' ? 'Орлы' : 'Решки'}! Монеты перемещены в сундук.`, 2000);
            }
            
            function proceedToEffects() {
                // Проверяем, есть ли монеты для эффектов
                if (gameState.hand.length > 0) {
                    gameState.phase = 'effects';
                    showProcessingNotification("Применяем эффекты монет...", 2000);
                    setTimeout(applyEffects, 2000);
                } else {
                    // Нет монет для эффектов - завершаем раунд
                    gameState.phase = null;
                    showProcessingNotification("В руке нет монет для эффектов. Раунд завершен.", 2000);
                    
                    // Проверяем конец игры
                    if (gameState.chest.length >= 7) {
                        endGame();
                    } else {
                        // Автоматически начинаем новый раунд
                        setTimeout(startRound, 2000);
                    }
                }
            }
        setTimeout(scrollToGameControls, 1500);
		}
        
        // Применить эффекты
        async function applyEffects() {
            // Создаем копию руки, так как массив будет изменяться
            const handCopy = [...gameState.hand];
            
            // Обрабатываем каждую монету последовательно
            for (const coin of handCopy) {
                if (coin.side === 'heads') {
                    // Эффект орла: добавить монету в сундук решкой вверх
                    if (gameState.active > 0) {
                        showProcessingNotification("Эффект орла: добавление монеты в сундук", 1500);
                        
                        // Анимация перемещения из актива в сундук (решка)
                        animateCoinMove(dom.activeCount, dom.chestTailsCount, 'tails', () => {
                            gameState.chest.push({
                                id: Date.now(),
                                side: 'tails'
                            });
                            gameState.active--;
                            updateCounters();
                        });
                        
                        // Ждем завершения анимации
                        await new Promise(resolve => setTimeout(resolve, 1000));
                    }
                } else if (coin.side === 'tails') {
                    // Эффект решки: вернуть одну монету из сундука в руку
                    if (gameState.chest.length > 0) {
                        // Ищем сначала орла, потом решку
                        const headIndex = gameState.chest.findIndex(c => c.side === 'heads');
                        const returnIndex = headIndex !== -1 ? headIndex : 0;
                        const returnedCoin = gameState.chest[returnIndex];
                        
                        showProcessingNotification("Эффект решки: возврат монеты из сундука", 1500);
                        
                        // Анимация перемещения из сундука в руку
                        const fromElement = returnedCoin.side === 'heads' ? 
                            dom.chestHeadsCount : dom.chestTailsCount;
                            
                        animateCoinMove(fromElement, dom.handCount, returnedCoin.side, () => {
                            // Возвращаем монету в руку
                            gameState.hand.push(returnedCoin);
                            
                            // Удаляем из сундука
                            gameState.chest.splice(returnIndex, 1);
                            
                            updateCounters();
                        });
                        
                        // Ждем завершения анимации
                        await new Promise(resolve => setTimeout(resolve, 1000));
                    }
                }
            }
            
            // Проверяем конец игры
            if (gameState.chest.length >= 7) {
                endGame();
            } else {
                gameState.phase = null;
                showProcessingNotification("Эффекты применены! Раунд завершен.", 2000);
                setTimeout(startRound, 2000);
            }
        setTimeout(scrollToGameControls, 1000);
		}
        
        // Завершить игру
        function endGame() {
            // Показываем модальное окно с результатами
            dom.endgameModal.style.display = 'flex';
            
            // Обновляем текст в зависимости от типа завершения
            if (gameState.isEarlyEnd) {
                dom.endgameMessage.innerHTML = `
                    <p>Игра завершена досрочно! Подсчитайте монеты в сундуках.</p>
                    <p>Победителем становится игрок с наибольшим количеством решек. При равенстве решек побеждает игрок с меньшим количеством орлов.</p>
                `;
            } else {
                dom.endgameMessage.innerHTML = `
                    <p>В вашем сундуке 7 монет! Победителем становится игрок с наибольшим количеством решек. При равенстве решек побеждает игрок с меньшим количеством орлов.</p>
                `;
            }
            
            // Очищаем и заполняем финальный сундук
            const finalChest = document.getElementById('final-chest');
            finalChest.innerHTML = '';
            
            gameState.chest.forEach(coin => {
                const coinEl = document.createElement('div');
                coinEl.className = `coin ${coin.side}`;
                coinEl.innerHTML = coin.side === 'heads' ? headsSVG : tailsSVG;
                finalChest.appendChild(coinEl);
            });
        }
        
        // Начать новую игру
        function newGame() {
            dom.endgameModal.style.display = 'none';
            dom.outcomeMessage.innerHTML = ''; // Очищаем сообщение
            initGame();
        }
        
        // Показать сундук
        function showChest() {
            // Обновляем счетчики в модальном окне
            const heads = gameState.chest.filter(coin => coin.side === 'heads').length;
            const tails = gameState.chest.filter(coin => coin.side === 'tails').length;
            dom.modalHeadsCount.textContent = heads;
            dom.modalTailsCount.textContent = tails;
            
            // Очищаем и заполняем сундук
            dom.chestCoins.innerHTML = '';
            
            gameState.chest.forEach(coin => {
                const coinEl = document.createElement('div');
                coinEl.className = `coin ${coin.side}`;
                coinEl.innerHTML = coin.side === 'heads' ? headsSVG : tailsSVG;
                dom.chestCoins.appendChild(coinEl);
            });
            
            dom.chestModal.style.display = 'flex';
					setTimeout(() => {
				document.getElementById('close-chest-btn').scrollIntoView({ 
					behavior: 'smooth', 
					block: 'end'
				});
			}, 300);
        }
        
        // Показать уведомление
        function showNotification(message, duration = 4000) {
            dom.notification.textContent = message;
            dom.notification.style.display = 'block';
            
            setTimeout(() => {
                dom.notification.style.display = 'none';
            }, duration);
        }
        
        // Показать центральное уведомление с прогресс-баром
        let processingTimer = null;
        
        function showProcessingNotification(message, duration) {
            // Остановить предыдущий таймер, если он есть
            if (processingTimer) {
                clearTimeout(processingTimer);
            }
            
            // Скрыть предыдущее уведомление
            dom.processingNotification.style.display = 'none';
            
            // Очистить предыдущую анимацию прогресс-бара
            const progress = dom.processingProgress;
            progress.style.animation = 'none';
            void progress.offsetHeight; // Перезапуск анимации
            
            // Показать новое уведомление
            dom.processingMessage.textContent = message;
            dom.processingNotification.style.display = 'block';
            
            // Запустить анимацию прогресс-бара
            progress.style.animation = `progressBar ${duration}ms linear forwards`;
            
            // Скрыть уведомление после завершения
            processingTimer = setTimeout(() => {
                dom.processingNotification.style.display = 'none';
                processingTimer = null;
            }, duration);
        }
        
        // Создать конфетти с улучшенной анимацией
		function createConfetti(options = {}) {
			const { type = 'wave', direction = 'up', count = 150, waves = 3 } = options;
			
			for (let wave = 0; wave < waves; wave++) {
				setTimeout(() => {
					for (let i = 0; i < count; i++) {
						setTimeout(() => {
							const confetti = document.createElement('div');
							confetti.className = 'confetti';
							
							if (type === 'blood') {
								confetti.classList.add('blood-symbol');
								confetti.textContent = '🩸';
								confetti.style.color = '#d12424';
								
								const size = 1.2 + Math.random() * 0.8;
								confetti.style.fontSize = `${size}rem`;
								
								// Случайный сдвиг по X для равномерного распределения
								confetti.style.left = `${Math.random() * 100}vw`;
							} else {
							confetti.classList.add('wave-confetti');
							confetti.textContent = '~';
							
							const hue = Math.floor(Math.random() * 360);
							confetti.style.color = `hsl(${hue}, 100%, 65%)`;
							
							const size = 1.5 + Math.random() * 1.5;
							confetti.style.fontSize = `${size}rem`;
							
							// Случайная скорость вращения
							const spinSpeed = 2 + Math.random() * 3;
							
							// Устанавливаем анимацию с динамической скоростью вращения
							confetti.style.animation = `
								confettiRise 1.35s ease-in-out forwards,
								randomSpin ${spinSpeed}s linear infinite
							`;
							}
							
							// Позиционирование
							confetti.style.left = `${Math.random() * 100}vw`;
							
							// Направление движения
							if (direction === 'up') {
								confetti.style.bottom = '0';
								confetti.style.top = 'auto';
							} else {
								confetti.style.top = '0';
								confetti.style.bottom = 'auto';
							}
							
							document.body.appendChild(confetti);
							
							// Удаление через 1.5 секунд
							setTimeout(() => confetti.remove(), 1500);
						}, i * 10);
					}
				}, wave * 200);
			}
		}
        
        // Обновление интерфейса
        function updateUI() {
            // Обновляем индикатор фазы
            let phaseText = '';
            switch (gameState.phase) {
                case null:
                    phaseText = 'Подготовка к игре';
                    break;
                case 'betting':
                    phaseText = 'Фаза 1: Тайная ставка';
                    break;
                case 'reveal':
                    phaseText = 'Фаза 2: Определение большинства';
                    break;
                case 'effects':
                    phaseText = 'Фаза 4: Применение эффектов';
                    break;
            }
            dom.phaseIndicator.textContent = phaseText;
            
            // Обновляем монеты в руке
            dom.handCoins.innerHTML = '';
            gameState.hand.forEach(coin => {
                const coinEl = document.createElement('div');
                coinEl.className = 'coin';
                
                if (gameState.phase === 'betting' && coin.side === null) {
                    coinEl.classList.add('unknown');
                    coinEl.innerHTML = unknownSVG;
                    coinEl.onclick = () => {
                        gameState.selectedCoin = coin.id;
                        updateUI();
                    };
                } else if (coin.side === 'heads') {
                    coinEl.classList.add('heads');
                    coinEl.innerHTML = headsSVG;
                } else if (coin.side === 'tails') {
                    coinEl.classList.add('tails');
                    coinEl.innerHTML = tailsSVG;
                }
                
                // Подсвечиваем выбранную монету
                if (coin.id === gameState.selectedCoin) {
                    coinEl.classList.add('selected');
                }
                
                dom.handCoins.appendChild(coinEl);
            });
            
            // Обновляем состояние кнопок
            dom.startRoundBtn.style.display = gameState.phase === null ? 'block' : 'none';
            dom.resolutionButtons.style.display = gameState.phase === 'reveal' ? 'flex' : 'none';
            
            // Показываем кнопки выбора стороны только в фазе ставок
            dom.headsBtn.style.display = gameState.phase === 'betting' ? 'block' : 'none';
            dom.tailsBtn.style.display = gameState.phase === 'betting' ? 'block' : 'none';
            
            dom.undoBtn.disabled = gameState.history.length === 0;
            dom.redoBtn.disabled = gameState.future.length === 0;
        }
        
        // Инициализация обработчиков событий
        function initEventListeners() {
            // Кнопки управления игрой
            dom.startRoundBtn.addEventListener('click', startRound);
            dom.majorityHeadsBtn.addEventListener('click', () => resolveMajority('heads'));
            dom.majorityTailsBtn.addEventListener('click', () => resolveMajority('tails'));
            dom.inflationResolveBtn.addEventListener('click', () => resolveMajority('inflation'));
            
            // Выбор стороны монеты
            dom.headsBtn.addEventListener('click', () => selectSide('heads'));
            dom.tailsBtn.addEventListener('click', () => selectSide('tails'));
            
            // Управление игрой
            dom.showChestBtn.addEventListener('click', showChest);
            dom.endGameBtn.addEventListener('click', () => {
                if (confirm("Вы уверены, что хотите завершить игру досрочно? Текущий прогресс будет сохранен.")) {
                    gameState.isEarlyEnd = true;
                    endGame();
                }
            });
            
            // Отмена/повтор действий
            dom.undoBtn.addEventListener('click', undo);
            dom.redoBtn.addEventListener('click', redo);
            
            // Кнопки в модальных окнах
            dom.closeChestBtn.addEventListener('click', () => {
                dom.chestModal.style.display = 'none';
            });
            dom.newGameBtn.addEventListener('click', newGame);
            
            // Обработчики для кнопок исхода игры
            dom.victoryBtn.addEventListener('click', () => {
                dom.outcomeMessage.innerHTML = '<div class="victory-message">Поздравляем с победой! 🏆</div>';
                
                // Взрывная анимация конфетти
                createConfetti({ 
                    type: 'wave',
                    direction: 'up',
                    waves: 3, 
                    count: 150 
                });
            });
            
            dom.defeatBtn.addEventListener('click', () => {
                dom.outcomeMessage.innerHTML = '<div class="neutral-message">Не расстраивайтесь! В следующий раз удача будет на вашей стороне</div>';
            });
            
            dom.drawBtn.addEventListener('click', () => {
                dom.outcomeMessage.innerHTML = `
                    <div class="blood-message">
                        Готовьтесь к поединку на арене! 🦁⚔️
                    </div>
                `;
                // Кровавые капли
                createConfetti({ 
                    type: 'blood',
                    direction: 'down',
                    count: 150,
                    waves: 1
                });
            });
            
            // Закрытие модальных окон по клику вне области
            window.addEventListener('click', (e) => {
                if (e.target === dom.chestModal) {
                    dom.chestModal.style.display = 'none';
                }
                if (e.target === dom.endgameModal) {
                    dom.endgameModal.style.display = 'none';
                }
            });
			document.querySelectorAll('.btn').forEach(btn => {
				btn.addEventListener('click', () => {
					setTimeout(scrollToGameControls, 200);
				});
			});
        }
        
        // Запуск приложения
        document.addEventListener('DOMContentLoaded', () => {
            initGame();
            initEventListeners();
        });
    </script>
</body>
</html>
